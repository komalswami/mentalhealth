(function () {var za=this;var ga={};function Sa(e,t){return t||("floating"===e?99999999:null)}function Ta(e){if("floating"===e)return{height:window.innerHeight,width:window.innerWidth};var t=document.getElementById("embed-chat");if(!t)throw new Error("The element containing the embedded webchat could not be found.");return{height:t.clientHeight,width:t.clientWidth}}var ha={};var ka,Ua,Va,Wa,Xa=false;function Aa($){var r=$.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var p=$.indexOf("=");return-1===p&&(p=r),[p,p===r?0:4-p%4]}function Ya($){var r=Aa($),p=r[0],o=r[1];return 3*(p+o)/4-o}function Za($,r,p){return 3*(r+p)/4-p}function $a($){var r,p,o=Aa($),e=o[0],y=o[1],h=new $yh9p$var$Arr(Za($,e,y)),a=0,t=y>0?e-4:e;for(p=0;p<t;p+=4)r=$yh9p$var$revLookup[$.charCodeAt(p)]<<18|$yh9p$var$revLookup[$.charCodeAt(p+1)]<<12|$yh9p$var$revLookup[$.charCodeAt(p+2)]<<6|$yh9p$var$revLookup[$.charCodeAt(p+3)],h[a++]=r>>16&255,h[a++]=r>>8&255,h[a++]=255&r;return 2===y&&(r=$yh9p$var$revLookup[$.charCodeAt(p)]<<2|$yh9p$var$revLookup[$.charCodeAt(p+1)]>>4,h[a++]=255&r),1===y&&(r=$yh9p$var$revLookup[$.charCodeAt(p)]<<10|$yh9p$var$revLookup[$.charCodeAt(p+1)]<<4|$yh9p$var$revLookup[$.charCodeAt(p+2)]>>2,h[a++]=r>>8&255,h[a++]=255&r),h}function _a($){return $yh9p$var$lookup[$>>18&63]+$yh9p$var$lookup[$>>12&63]+$yh9p$var$lookup[$>>6&63]+$yh9p$var$lookup[63&$]}function ab($,r,p){for(var o,e=[],y=r;y<p;y+=3)o=($[y]<<16&16711680)+($[y+1]<<8&65280)+(255&$[y+2]),e.push(_a(o));return e.join("")}function bb($){for(var r,p=$.length,o=p%3,e=[],y=0,h=p-o;y<h;y+=16383)e.push(ab($,y,y+16383>h?h:y+16383));return 1===o?(r=$[p-1],e.push($yh9p$var$lookup[r>>2]+$yh9p$var$lookup[r<<4&63]+"==")):2===o&&(r=($[p-2]<<8)+$[p-1],e.push($yh9p$var$lookup[r>>10]+$yh9p$var$lookup[r>>4&63]+$yh9p$var$lookup[r<<2&63]+"=")),e.join("")}function cb(){if(Xa)return;Xa=true;ka={};Ua=Ya;ka.byteLength=Ua;Va=$a;ka.toByteArray=Va;Wa=bb;ka.fromByteArray=Wa;for(var $yh9p$var$lookup=[],$yh9p$var$revLookup=[],$yh9p$var$Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,$yh9p$var$code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$yh9p$var$i=0,$yh9p$var$len=$yh9p$var$code.length;$yh9p$var$i<$yh9p$var$len;++$yh9p$var$i)$yh9p$var$lookup[$yh9p$var$i]=$yh9p$var$code[$yh9p$var$i],$yh9p$var$revLookup[$yh9p$var$code.charCodeAt($yh9p$var$i)]=$yh9p$var$i;$yh9p$var$revLookup["-".charCodeAt(0)]=62,$yh9p$var$revLookup["_".charCodeAt(0)]=63}var ra,db,eb,fb=false;function gb(){if(fb)return;fb=true;ra={};db=function(t,r,o,a,$){var e,p,J=8*$-a-1,N=(1<<J)-1,h=N>>1,M=-7,w=o?$-1:0,f=o?-1:1,i=t[r+w];for(w+=f,e=i&(1<<-M)-1,i>>=-M,M+=J;M>0;e=256*e+t[r+w],w+=f,M-=8);for(p=e&(1<<-M)-1,e>>=-M,M+=a;M>0;p=256*p+t[r+w],w+=f,M-=8);if(0===e)e=1-h;else{if(e===N)return p?NaN:1/0*(i?-1:1);p+=Math.pow(2,a),e-=h}return(i?-1:1)*p*Math.pow(2,e-a)};ra.read=db;eb=function(t,r,o,a,$,e){var p,J,N,h=8*e-$-1,M=(1<<h)-1,w=M>>1,f=23===$?Math.pow(2,-24)-Math.pow(2,-77):0,i=a?0:e-1,g=a?1:-1,s=r<0||0===r&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(J=isNaN(r)?1:0,p=M):(p=Math.floor(Math.log(r)/Math.LN2),r*(N=Math.pow(2,-p))<1&&(p--,N*=2),(r+=p+w>=1?f/N:f*Math.pow(2,1-w))*N>=2&&(p++,N/=2),p+w>=M?(J=0,p=M):p+w>=1?(J=(r*N-1)*Math.pow(2,$),p+=w):(J=r*Math.pow(2,w-1)*Math.pow(2,$),p=0));$>=8;t[o+i]=255&J,i+=g,J/=256,$-=8);for(p=p<<$|J,h+=$;h>0;t[o+i]=255&p,i+=g,p/=256,h-=8);t[o+i-g]|=128*s};ra.write=eb}var hb,ib,jb=false;function kb(){if(jb)return;jb=true;hb={};ib={}.toString;hb=Array.isArray||function(r){return"[object Array]"==ib.call(r)}}var ia,sa,fa,Ba,lb,mb,Ca,nb,Da,ob,pb=false;function qb(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(r){return!1}}function la(){return aa.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function da(e,r){if(la()<r)throw new RangeError("Invalid typed array length");return aa.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(r)).__proto__=aa.prototype:(null===e&&(e=new aa(r)),e.length=r),e}function aa(e,r,t){if(!(aa.TYPED_ARRAY_SUPPORT||this instanceof aa))return new aa(e,r,t);if("number"==typeof e){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return ta(this,e)}return Ea(this,e,r,t)}function Ea(e,r,t,$){if("number"==typeof r)throw new TypeError("\"value\" argument must not be a number");return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?tb(e,r,t,$):"string"==typeof r?sb(e,r,t):ub(e,r)}function Fa(e){if("number"!=typeof e)throw new TypeError("\"size\" argument must be a number");if(e<0)throw new RangeError("\"size\" argument must not be negative")}function rb(e,r,t,$){return Fa(r),r<=0?da(e,r):void 0!==t?"string"==typeof $?da(e,r).fill(t,$):da(e,r).fill(t):da(e,r)}function ta(e,r){if(Fa(r),e=da(e,r<0?0:0|va(r)),!aa.TYPED_ARRAY_SUPPORT)for(var t=0;t<r;++t)e[t]=0;return e}function sb(e,r,t){if("string"==typeof t&&""!==t||(t="utf8"),!aa.isEncoding(t))throw new TypeError("\"encoding\" must be a valid string encoding");var $=0|Ga(r,t),n=(e=da(e,$)).write(r,t);return n!==$&&(e=e.slice(0,n)),e}function ua(e,r){var t=r.length<0?0:0|va(r.length);e=da(e,t);for(var $=0;$<t;$+=1)e[$]=255&r[$];return e}function tb(e,r,t,$){if(r.byteLength,t<0||r.byteLength<t)throw new RangeError("'offset' is out of bounds");if(r.byteLength<t+($||0))throw new RangeError("'length' is out of bounds");return r=void 0===t&&void 0===$?new Uint8Array(r):void 0===$?new Uint8Array(r,t):new Uint8Array(r,t,$),aa.TYPED_ARRAY_SUPPORT?(e=r).__proto__=aa.prototype:e=ua(e,r),e}function ub(e,r){if(aa.isBuffer(r)){var t=0|va(r.length);return 0===(e=da(e,t)).length?e:(r.copy(e,0,0,t),e)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||Nb(r.length)?da(e,0):ua(e,r);if("Buffer"===r.type&&Ba(r.data))return ua(e,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function va(e){if(e>=la())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+la().toString(16)+" bytes");return 0|e}function vb(e){return+e!=e&&(e=0),aa.alloc(+e)}function Ga(e,r){if(aa.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var t=e.length;if(0===t)return 0;for(var $=!1;;)switch(r){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return oa(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*t;case"hex":return t>>>1;case"base64":return Oa(e).length;default:if($)return oa(e).length;r=(""+r).toLowerCase(),$=!0;}}function wb(e,r,t){var $=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===t||t>this.length)&&(t=this.length),t<=0)return"";if((t>>>=0)<=(r>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return Gb(this,r,t);case"utf8":case"utf-8":return Ka(this,r,t);case"ascii":return Eb(this,r,t);case"latin1":case"binary":return Fb(this,r,t);case"base64":return Cb(this,r,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Hb(this,r,t);default:if($)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),$=!0;}}function ea(e,r,t){var $=e[r];e[r]=e[t],e[t]=$}function Ha(e,r,t,$,n){if(0===e.length)return-1;if("string"==typeof t?($=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=n?0:e.length-1),t<0&&(t=e.length+t),t>=e.length){if(n)return-1;t=e.length-1}else if(t<0){if(!n)return-1;t=0}if("string"==typeof r&&(r=aa.from(r,$)),aa.isBuffer(r))return 0===r.length?-1:Ia(e,r,t,$,n);if("number"==typeof r)return r&=255,aa.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,r,t):Uint8Array.prototype.lastIndexOf.call(e,r,t):Ia(e,[r],t,$,n);throw new TypeError("val must be string, number or Buffer")}function Ia(e,r,t,$,n){var f,a=1,i=e.length,o=r.length;if(void 0!==$&&("ucs2"===($=String($).toLowerCase())||"ucs-2"===$||"utf16le"===$||"utf-16le"===$)){if(e.length<2||r.length<2)return-1;a=2,i/=2,o/=2,t/=2}function u(e,r){return 1===a?e[r]:e.readUInt16BE(r*a)}if(n){var p=-1;for(f=t;f<i;f++)if(u(e,f)===u(r,-1===p?0:f-p)){if(-1===p&&(p=f),f-p+1===o)return p*a}else-1!==p&&(f-=f-p),p=-1}else for(t+o>i&&(t=i-o),f=t;f>=0;f--){for(var s=!0,h=0;h<o;h++)if(u(e,f+h)!==u(r,h)){s=!1;break}if(s)return f}return-1}function xb(e,r,t,$){t=Number(t)||0;var n=e.length-t;$?($=Number($))>n&&($=n):$=n;var f=r.length;if(f%2!=0)throw new TypeError("Invalid hex string");$>f/2&&($=f/2);for(var a=0;a<$;++a){var i=parseInt(r.substr(2*a,2),16);if(isNaN(i))return a;e[t+a]=i}return a}function yb(e,r,t,$){return pa(oa(r,e.length-t),e,t,$)}function Ja(e,r,t,$){return pa(Lb(r),e,t,$)}function zb(e,r,t,$){return Ja(e,r,t,$)}function Ab(e,r,t,$){return pa(Oa(r),e,t,$)}function Bb(e,r,t,$){return pa(Mb(r,e.length-t),e,t,$)}function Cb(e,r,t){return 0===r&&t===e.length?sa.fromByteArray(e):sa.fromByteArray(e.slice(r,t))}function Ka(e,r,t){t=Math.min(e.length,t);for(var $=[],n=r;n<t;){var f,a,i,o,u=e[n],p=null,s=u>239?4:u>223?3:u>191?2:1;if(n+s<=t)switch(s){case 1:u<128&&(p=u);break;case 2:128==(192&(f=e[n+1]))&&(o=(31&u)<<6|63&f)>127&&(p=o);break;case 3:f=e[n+1],a=e[n+2],128==(192&f)&&128==(192&a)&&(o=(15&u)<<12|(63&f)<<6|63&a)>2047&&(o<55296||o>57343)&&(p=o);break;case 4:f=e[n+1],a=e[n+2],i=e[n+3],128==(192&f)&&128==(192&a)&&128==(192&i)&&(o=(15&u)<<18|(63&f)<<12|(63&a)<<6|63&i)>65535&&o<1114112&&(p=o);}null===p?(p=65533,s=1):p>65535&&(p-=65536,$.push(p>>>10&1023|55296),p=56320|1023&p),$.push(p),n+=s}return Db($)}function Db(e){var r=e.length;if(r<=Da)return String.fromCharCode.apply(String,e);for(var t="",$=0;$<r;)t+=String.fromCharCode.apply(String,e.slice($,$+=Da));return t}function Eb(e,r,t){var $="";t=Math.min(e.length,t);for(var n=r;n<t;++n)$+=String.fromCharCode(127&e[n]);return $}function Fb(e,r,t){var $="";t=Math.min(e.length,t);for(var n=r;n<t;++n)$+=String.fromCharCode(e[n]);return $}function Gb(e,r,t){var $=e.length;(!r||r<0)&&(r=0),(!t||t<0||t>$)&&(t=$);for(var n="",f=r;f<t;++f)n+=Kb(e[f]);return n}function Hb(e,r,t){for(var $=e.slice(r,t),n="",f=0;f<$.length;f+=2)n+=String.fromCharCode($[f]+256*$[f+1]);return n}function ba(e,r,t){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+r>t)throw new RangeError("Trying to access beyond buffer length")}function ca(e,r,t,$,n,f){if(!aa.isBuffer(e))throw new TypeError("\"buffer\" argument must be a Buffer instance");if(r>n||r<f)throw new RangeError("\"value\" argument is out of bounds");if(t+$>e.length)throw new RangeError("Index out of range")}function ma(e,r,t,$){r<0&&(r=65535+r+1);for(var n=0,f=Math.min(e.length-t,2);n<f;++n)e[t+n]=(r&255<<8*($?n:1-n))>>>8*($?n:1-n)}function na(e,r,t,$){r<0&&(r=4294967295+r+1);for(var n=0,f=Math.min(e.length-t,4);n<f;++n)e[t+n]=r>>>8*($?n:3-n)&255}function La(e,r,t,$,n,f){if(t+$>e.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function Ma(e,r,t,$,n){return n||La(e,r,t,4,3.4028234663852886e38,-3.4028234663852886e38),fa.write(e,r,t,$,23,4),t+4}function Na(e,r,t,$,n){return n||La(e,r,t,8,1.7976931348623157e308,-1.7976931348623157e308),fa.write(e,r,t,$,52,8),t+8}function Ib(e){if((e=Jb(e).replace(ob,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function Jb(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Kb(e){return e<16?"0"+e.toString(16):e.toString(16)}function oa(e,r){var t;r=r||1/0;for(var $=e.length,n=null,f=[],a=0;a<$;++a){if((t=e.charCodeAt(a))>55295&&t<57344){if(!n){if(t>56319){(r-=3)>-1&&f.push(239,191,189);continue}if(a+1===$){(r-=3)>-1&&f.push(239,191,189);continue}n=t;continue}if(t<56320){(r-=3)>-1&&f.push(239,191,189),n=t;continue}t=65536+(n-55296<<10|t-56320)}else n&&(r-=3)>-1&&f.push(239,191,189);if(n=null,t<128){if((r-=1)<0)break;f.push(t)}else if(t<2048){if((r-=2)<0)break;f.push(t>>6|192,63&t|128)}else if(t<65536){if((r-=3)<0)break;f.push(t>>12|224,t>>6&63|128,63&t|128)}else{if(!(t<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;f.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}}return f}function Lb(e){for(var r=[],t=0;t<e.length;++t)r.push(255&e.charCodeAt(t));return r}function Mb(e,r){for(var t,$,n,f=[],a=0;a<e.length&&!((r-=2)<0);++a)$=(t=e.charCodeAt(a))>>8,n=t%256,f.push(n),f.push($);return f}function Oa(e){return sa.toByteArray(Ib(e))}function pa(e,r,t,$){for(var n=0;n<$&&!(n+t>=r.length||n>=e.length);++n)r[n+t]=e[n];return n}function Nb(e){return e!=e}function Ob(){if(pb)return;pb=true;ia={};sa=(cb(),ka);fa=(gb(),ra);Ba=(kb(),hb);lb=aa;ia.Buffer=lb;mb=vb;ia.SlowBuffer=mb;Ca=50;ia.INSPECT_MAX_BYTES=Ca,aa.TYPED_ARRAY_SUPPORT=void 0!==za.TYPED_ARRAY_SUPPORT?za.TYPED_ARRAY_SUPPORT:qb();nb=la();ia.kMaxLength=nb,aa.poolSize=8192,aa._augment=function(e){return e.__proto__=aa.prototype,e},aa.from=function(e,r,t){return Ea(null,e,r,t)},aa.TYPED_ARRAY_SUPPORT&&(aa.prototype.__proto__=Uint8Array.prototype,aa.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&aa[Symbol.species]===aa&&Object.defineProperty(aa,Symbol.species,{value:null,configurable:!0})),aa.alloc=function(e,r,t){return rb(null,e,r,t)},aa.allocUnsafe=function(e){return ta(null,e)},aa.allocUnsafeSlow=function(e){return ta(null,e)},aa.isBuffer=function(e){return!(null==e||!e._isBuffer)},aa.compare=function(e,r){if(!aa.isBuffer(e)||!aa.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(e===r)return 0;for(var t=e.length,$=r.length,n=0,f=Math.min(t,$);n<f;++n)if(e[n]!==r[n]){t=e[n],$=r[n];break}return t<$?-1:$<t?1:0},aa.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1;}},aa.concat=function(e,r){if(!Ba(e))throw new TypeError("\"list\" argument must be an Array of Buffers");if(0===e.length)return aa.alloc(0);var t;if(void 0===r)for(r=0,t=0;t<e.length;++t)r+=e[t].length;var $=aa.allocUnsafe(r),n=0;for(t=0;t<e.length;++t){var f=e[t];if(!aa.isBuffer(f))throw new TypeError("\"list\" argument must be an Array of Buffers");f.copy($,n),n+=f.length}return $},aa.byteLength=Ga,aa.prototype._isBuffer=!0,aa.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<e;r+=2)ea(this,r,r+1);return this},aa.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<e;r+=4)ea(this,r,r+3),ea(this,r+1,r+2);return this},aa.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<e;r+=8)ea(this,r,r+7),ea(this,r+1,r+6),ea(this,r+2,r+5),ea(this,r+3,r+4);return this},aa.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?Ka(this,0,e):wb.apply(this,arguments)},aa.prototype.equals=function(e){if(!aa.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===aa.compare(this,e)},aa.prototype.inspect=function(){var e="",r=Ca;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},aa.prototype.compare=function(e,r,t,$,n){if(!aa.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===t&&(t=e?e.length:0),void 0===$&&($=0),void 0===n&&(n=this.length),r<0||t>e.length||$<0||n>this.length)throw new RangeError("out of range index");if($>=n&&r>=t)return 0;if($>=n)return-1;if(r>=t)return 1;if(this===e)return 0;for(var f=(n>>>=0)-($>>>=0),a=(t>>>=0)-(r>>>=0),i=Math.min(f,a),o=this.slice($,n),u=e.slice(r,t),p=0;p<i;++p)if(o[p]!==u[p]){f=o[p],a=u[p];break}return f<a?-1:a<f?1:0},aa.prototype.includes=function(e,r,t){return-1!==this.indexOf(e,r,t)},aa.prototype.indexOf=function(e,r,t){return Ha(this,e,r,t,!0)},aa.prototype.lastIndexOf=function(e,r,t){return Ha(this,e,r,t,!1)},aa.prototype.write=function(e,r,t,$){if(void 0===r)$="utf8",t=this.length,r=0;else if(void 0===t&&"string"==typeof r)$=r,t=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(t)?(t|=0,void 0===$&&($="utf8")):($=t,t=void 0)}var n=this.length-r;if((void 0===t||t>n)&&(t=n),e.length>0&&(t<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");$||($="utf8");for(var f=!1;;)switch($){case"hex":return xb(this,e,r,t);case"utf8":case"utf-8":return yb(this,e,r,t);case"ascii":return Ja(this,e,r,t);case"latin1":case"binary":return zb(this,e,r,t);case"base64":return Ab(this,e,r,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Bb(this,e,r,t);default:if(f)throw new TypeError("Unknown encoding: "+$);$=(""+$).toLowerCase(),f=!0;}},aa.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};Da=4096;aa.prototype.slice=function(e,r){var t,$=this.length;if((e=~~e)<0?(e+=$)<0&&(e=0):e>$&&(e=$),(r=void 0===r?$:~~r)<0?(r+=$)<0&&(r=0):r>$&&(r=$),r<e&&(r=e),aa.TYPED_ARRAY_SUPPORT)(t=this.subarray(e,r)).__proto__=aa.prototype;else{var n=r-e;t=new aa(n,void 0);for(var f=0;f<n;++f)t[f]=this[f+e]}return t},aa.prototype.readUIntLE=function(e,r,t){e|=0,r|=0,t||ba(e,r,this.length);for(var $=this[e],n=1,f=0;++f<r&&(n*=256);)$+=this[e+f]*n;return $},aa.prototype.readUIntBE=function(e,r,t){e|=0,r|=0,t||ba(e,r,this.length);for(var $=this[e+--r],n=1;r>0&&(n*=256);)$+=this[e+--r]*n;return $},aa.prototype.readUInt8=function(e,r){return r||ba(e,1,this.length),this[e]},aa.prototype.readUInt16LE=function(e,r){return r||ba(e,2,this.length),this[e]|this[e+1]<<8},aa.prototype.readUInt16BE=function(e,r){return r||ba(e,2,this.length),this[e]<<8|this[e+1]},aa.prototype.readUInt32LE=function(e,r){return r||ba(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},aa.prototype.readUInt32BE=function(e,r){return r||ba(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},aa.prototype.readIntLE=function(e,r,t){e|=0,r|=0,t||ba(e,r,this.length);for(var $=this[e],n=1,f=0;++f<r&&(n*=256);)$+=this[e+f]*n;return $>=(n*=128)&&($-=Math.pow(2,8*r)),$},aa.prototype.readIntBE=function(e,r,t){e|=0,r|=0,t||ba(e,r,this.length);for(var $=r,n=1,f=this[e+--$];$>0&&(n*=256);)f+=this[e+--$]*n;return f>=(n*=128)&&(f-=Math.pow(2,8*r)),f},aa.prototype.readInt8=function(e,r){return r||ba(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},aa.prototype.readInt16LE=function(e,r){r||ba(e,2,this.length);var t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},aa.prototype.readInt16BE=function(e,r){r||ba(e,2,this.length);var t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},aa.prototype.readInt32LE=function(e,r){return r||ba(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},aa.prototype.readInt32BE=function(e,r){return r||ba(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},aa.prototype.readFloatLE=function(e,r){return r||ba(e,4,this.length),fa.read(this,e,!0,23,4)},aa.prototype.readFloatBE=function(e,r){return r||ba(e,4,this.length),fa.read(this,e,!1,23,4)},aa.prototype.readDoubleLE=function(e,r){return r||ba(e,8,this.length),fa.read(this,e,!0,52,8)},aa.prototype.readDoubleBE=function(e,r){return r||ba(e,8,this.length),fa.read(this,e,!1,52,8)},aa.prototype.writeUIntLE=function(e,r,t,$){(e=+e,r|=0,t|=0,$)||ca(this,e,r,t,Math.pow(2,8*t)-1,0);var n=1,f=0;for(this[r]=255&e;++f<t&&(n*=256);)this[r+f]=e/n&255;return r+t},aa.prototype.writeUIntBE=function(e,r,t,$){(e=+e,r|=0,t|=0,$)||ca(this,e,r,t,Math.pow(2,8*t)-1,0);var n=t-1,f=1;for(this[r+n]=255&e;--n>=0&&(f*=256);)this[r+n]=e/f&255;return r+t},aa.prototype.writeUInt8=function(e,r,t){return e=+e,r|=0,t||ca(this,e,r,1,255,0),aa.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[r]=255&e,r+1},aa.prototype.writeUInt16LE=function(e,r,t){return e=+e,r|=0,t||ca(this,e,r,2,65535,0),aa.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8):ma(this,e,r,!0),r+2},aa.prototype.writeUInt16BE=function(e,r,t){return e=+e,r|=0,t||ca(this,e,r,2,65535,0),aa.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=255&e):ma(this,e,r,!1),r+2},aa.prototype.writeUInt32LE=function(e,r,t){return e=+e,r|=0,t||ca(this,e,r,4,4294967295,0),aa.TYPED_ARRAY_SUPPORT?(this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=255&e):na(this,e,r,!0),r+4},aa.prototype.writeUInt32BE=function(e,r,t){return e=+e,r|=0,t||ca(this,e,r,4,4294967295,0),aa.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e):na(this,e,r,!1),r+4},aa.prototype.writeIntLE=function(e,r,t,$){if(e=+e,r|=0,!$){var n=Math.pow(2,8*t-1);ca(this,e,r,t,n-1,-n)}var f=0,a=1,i=0;for(this[r]=255&e;++f<t&&(a*=256);)e<0&&0===i&&0!==this[r+f-1]&&(i=1),this[r+f]=(e/a>>0)-i&255;return r+t},aa.prototype.writeIntBE=function(e,r,t,$){if(e=+e,r|=0,!$){var n=Math.pow(2,8*t-1);ca(this,e,r,t,n-1,-n)}var f=t-1,a=1,i=0;for(this[r+f]=255&e;--f>=0&&(a*=256);)e<0&&0===i&&0!==this[r+f+1]&&(i=1),this[r+f]=(e/a>>0)-i&255;return r+t},aa.prototype.writeInt8=function(e,r,t){return e=+e,r|=0,t||ca(this,e,r,1,127,-128),aa.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[r]=255&e,r+1},aa.prototype.writeInt16LE=function(e,r,t){return e=+e,r|=0,t||ca(this,e,r,2,32767,-32768),aa.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8):ma(this,e,r,!0),r+2},aa.prototype.writeInt16BE=function(e,r,t){return e=+e,r|=0,t||ca(this,e,r,2,32767,-32768),aa.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=255&e):ma(this,e,r,!1),r+2},aa.prototype.writeInt32LE=function(e,r,t){return e=+e,r|=0,t||ca(this,e,r,4,2147483647,-2147483648),aa.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24):na(this,e,r,!0),r+4},aa.prototype.writeInt32BE=function(e,r,t){return e=+e,r|=0,t||ca(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),aa.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e):na(this,e,r,!1),r+4},aa.prototype.writeFloatLE=function(e,r,t){return Ma(this,e,r,!0,t)},aa.prototype.writeFloatBE=function(e,r,t){return Ma(this,e,r,!1,t)},aa.prototype.writeDoubleLE=function(e,r,t){return Na(this,e,r,!0,t)},aa.prototype.writeDoubleBE=function(e,r,t){return Na(this,e,r,!1,t)},aa.prototype.copy=function(e,r,t,$){if(t||(t=0),$||0===$||($=this.length),r>=e.length&&(r=e.length),r||(r=0),$>0&&$<t&&($=t),$===t)return 0;if(0===e.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(t<0||t>=this.length)throw new RangeError("sourceStart out of bounds");if($<0)throw new RangeError("sourceEnd out of bounds");$>this.length&&($=this.length),e.length-r<$-t&&($=e.length-r+t);var n,f=$-t;if(this===e&&t<r&&r<$)for(n=f-1;n>=0;--n)e[n+r]=this[n+t];else if(f<1e3||!aa.TYPED_ARRAY_SUPPORT)for(n=0;n<f;++n)e[n+r]=this[n+t];else Uint8Array.prototype.set.call(e,this.subarray(t,t+f),r);return f},aa.prototype.fill=function(e,r,t,$){if("string"==typeof e){if("string"==typeof r?($=r,r=0,t=this.length):"string"==typeof t&&($=t,t=this.length),1===e.length){var n=e.charCodeAt(0);n<256&&(e=n)}if(void 0!==$&&"string"!=typeof $)throw new TypeError("encoding must be a string");if("string"==typeof $&&!aa.isEncoding($))throw new TypeError("Unknown encoding: "+$)}else"number"==typeof e&&(e&=255);if(r<0||this.length<r||this.length<t)throw new RangeError("Out of range index");if(t<=r)return this;var f;if(r>>>=0,t=void 0===t?this.length:t>>>0,e||(e=0),"number"==typeof e)for(f=r;f<t;++f)this[f]=e;else{var a=aa.isBuffer(e)?e:oa(new aa(e,$).toString()),i=a.length;for(f=0;f<t-r;++f)this[f+r]=a[f%i]}return this};ob=/[^+\/0-9A-Za-z-_]/g}var Pb,wa,a,qa,ja,Qb=false;function Rb(){if(Qb)return;Qb=true;a=arguments[0];qa=(Ob(),ia).Buffer;ja={};!function(n,e){"object"==typeof ja?ja=e():"function"==typeof wa&&wa.amd?wa("zoid",[],e):"object"==typeof ja?(Pb=e(),ja.zoid=Pb):n.zoid=e()}("undefined"!=typeof self?self:ja,function(){return function(n){var e={};function r(t){if(e[t])return e[t].exports;var o=e[t]={i:t,l:!1,exports:{}};return n[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=n,r.c=e,r.d=function(n,e,t){r.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:t})},r.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r.t=function(n,e){if(1&e&&(n=r(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var o in n)r.d(t,o,function(e){return n[e]}.bind(null,o));return t},r.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(e,"a",e),e},r.o=function(n,e){return{}.hasOwnProperty.call(n,e)},r.p="",r(r.s=0)}([function(n,e,r){function t(){return(t=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var t in r)({}).hasOwnProperty.call(r,t)&&(n[t]=r[t])}return n}).apply(this,arguments)}function o(n){try{if(!n)return!1;if("undefined"!=typeof Promise&&n instanceof Promise)return!0;if("undefined"!=typeof window&&"function"==typeof window.Window&&n instanceof window.Window)return!1;if("undefined"!=typeof window&&"function"==typeof window.constructor&&n instanceof window.constructor)return!1;var e={}.toString;if(e){var r=e.call(n);if("[object Window]"===r||"[object global]"===r||"[object DOMWindow]"===r)return!1}if("function"==typeof n.then)return!0}catch(t){return!1}return!1}r.r(e),r.d(e,"PopupOpenError",function(){return _n}),r.d(e,"create",function(){return Le}),r.d(e,"destroy",function(){return qe}),r.d(e,"destroyComponents",function(){return Me}),r.d(e,"destroyAll",function(){return $e}),r.d(e,"PROP_TYPE",function(){return xe}),r.d(e,"PROP_SERIALIZATION",function(){return Pe}),r.d(e,"CONTEXT",function(){return We}),r.d(e,"EVENT",function(){return Oe});var i,a=[],u=[],c=0;function s(){if(!c&&i){var n=i;i=null,n.resolve()}}function f(){c+=1}function d(){c-=1,s()}var l=function(){function n(n){var e=this;if(this.resolved=void 0,this.rejected=void 0,this.errorHandled=void 0,this.value=void 0,this.error=void 0,this.handlers=void 0,this.dispatching=void 0,this.stack=void 0,this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],n){var r,t,o=!1,i=!1,a=!1;f();try{n(function(n){a?e.resolve(n):(o=!0,r=n)},function(n){a?e.reject(n):(i=!0,t=n)})}catch(u){return d(),void this.reject(u)}d(),a=!0,o?this.resolve(r):i&&this.reject(t)}}var e=n.prototype;return e.resolve=function(n){if(this.resolved||this.rejected)return this;if(o(n))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=n,this.dispatch(),this},e.reject=function(n){var e=this;if(this.resolved||this.rejected)return this;if(o(n))throw new Error("Can not reject promise with another promise");if(!n){var r=n&&"function"==typeof n.toString?n.toString():{}.toString.call(n);n=new Error("Expected reject to be called with Error, got "+r)}return this.rejected=!0,this.error=n,this.errorHandled||setTimeout(function(){e.errorHandled||function(n,e){if(-1===a.indexOf(n)){a.push(n),setTimeout(function(){throw n},1);for(var r=0;r<u.length;r++)u[r](n,e)}}(n,e)},1),this.dispatch(),this},e.asyncReject=function(n){return this.errorHandled=!0,this.reject(n),this},e.dispatch=function(){var e=this.resolved,r=this.rejected,t=this.handlers;if(!this.dispatching&&(e||r)){this.dispatching=!0,f();for(var i=function(n,e){return n.then(function(n){e.resolve(n)},function(n){e.reject(n)})},a=0;a<t.length;a++){var u=t[a],c=u.onSuccess,s=u.onError,l=u.promise,h=void 0;if(e)try{h=c?c(this.value):this.value}catch(w){l.reject(w);continue}else if(r){if(!s){l.reject(this.error);continue}try{h=s(this.error)}catch(w){l.reject(w);continue}}h instanceof n&&(h.resolved||h.rejected)?(h.resolved?l.resolve(h.value):l.reject(h.error),h.errorHandled=!0):o(h)?h instanceof n&&(h.resolved||h.rejected)?h.resolved?l.resolve(h.value):l.reject(h.error):i(h,l):l.resolve(h)}t.length=0,this.dispatching=!1,d()}},e.then=function(e,r){if(e&&"function"!=typeof e&&!e.call)throw new Error("Promise.then expected a function for success handler");if(r&&"function"!=typeof r&&!r.call)throw new Error("Promise.then expected a function for error handler");var t=new n;return this.handlers.push({promise:t,onSuccess:e,onError:r}),this.errorHandled=!0,this.dispatch(),t},e.catch=function(n){return this.then(void 0,n)},e.finally=function(e){if(e&&"function"!=typeof e&&!e.call)throw new Error("Promise.finally expected a function");return this.then(function(r){return n.try(e).then(function(){return r})},function(r){return n.try(e).then(function(){throw r})})},e.timeout=function(n,e){var r=this;if(this.resolved||this.rejected)return this;var t=setTimeout(function(){r.resolved||r.rejected||r.reject(e||new Error("Promise timed out after "+n+"ms"))},n);return this.then(function(n){return clearTimeout(t),n})},e.toPromise=function(){if("undefined"==typeof Promise)throw new TypeError("Could not find Promise");return Promise.resolve(this)},n.resolve=function(e){return e instanceof n?e:o(e)?new n(function(n,r){return e.then(n,r)}):new n().resolve(e)},n.reject=function(e){return new n().reject(e)},n.asyncReject=function(e){return new n().asyncReject(e)},n.all=function(e){var r=new n,t=e.length,i=[];if(!t)return r.resolve(i),r;for(var a=function(n,e,o){return e.then(function(e){i[n]=e,0==(t-=1)&&r.resolve(i)},function(n){o.reject(n)})},u=0;u<e.length;u++){var c=e[u];if(c instanceof n){if(c.resolved){i[u]=c.value,t-=1;continue}}else if(!o(c)){i[u]=c,t-=1;continue}a(u,n.resolve(c),r)}return 0===t&&r.resolve(i),r},n.hash=function(e){var r={};return n.all(Object.keys(e).map(function(t){return n.resolve(e[t]).then(function(n){r[t]=n})})).then(function(){return r})},n.map=function(e,r){return n.all(e.map(r))},n.onPossiblyUnhandledException=function(n){return function(n){return u.push(n),{cancel:function(){u.splice(u.indexOf(n),1)}}}(n)},n.try=function(e,r,t){if(e&&"function"!=typeof e&&!e.call)throw new Error("Promise.try expected a function");var o;f();try{o=e.apply(r,t||[])}catch(i){return d(),n.reject(i)}return d(),n.resolve(o)},n.delay=function(e){return new n(function(n){setTimeout(n,e)})},n.isPromise=function(e){return!!(e&&e instanceof n)||o(e)},n.flush=function(){return e=i=i||new n,s(),e;var e},n}();function h(n){return"[object RegExp]"==={}.toString.call(n)}var w={IFRAME:"iframe",POPUP:"popup"},p="Call was rejected by callee.\r\n";function v(n){return void 0===n&&(n=window),"about:"===n.location.protocol}function m(n){if(void 0===n&&(n=window),n)try{if(n.parent&&n.parent!==n)return n.parent}catch(e){}}function y(n){if(void 0===n&&(n=window),n&&!m(n))try{return n.opener}catch(e){}}function g(n){try{return!0}catch(e){}return!1}function _(n){void 0===n&&(n=window);var e=n.location;if(!e)throw new Error("Can not read window location");var r=e.protocol;if(!r)throw new Error("Can not read window protocol");if("file:"===r)return"file://";if("about:"===r){var t=m(n);return t&&g()?_(t):"about://"}var o=e.host;if(!o)throw new Error("Can not read window host");return r+"//"+o}function E(n){void 0===n&&(n=window);var e=_(n);return e&&n.mockDomain&&0===n.mockDomain.indexOf("mock:")?n.mockDomain:e}function b(n){if(!function(n){try{if(n===window)return!0}catch(r){}try{var e=Object.getOwnPropertyDescriptor(n,"location");if(e&&!1===e.enumerable)return!1}catch(r){}try{if(v(n)&&g())return!0}catch(r){}try{if(_(n)===_(window))return!0}catch(r){}return!1}(n))return!1;try{if(n===window)return!0;if(v(n)&&g())return!0;if(E(window)===E(n))return!0}catch(e){}return!1}function x(n){if(!b(n))throw new Error("Expected window to be same domain");return n}function P(n,e){if(!n||!e)return!1;var r=m(e);return r?r===n:-1!==function(n){var e=[];try{for(;n.parent!==n;)e.push(n.parent),n=n.parent}catch(r){}return e}(e).indexOf(n)}function W(n){var e,r,t=[];try{e=n.frames}catch(c){e=n}try{r=e.length}catch(c){}if(0===r)return t;if(r){for(var o=0;o<r;o++){var i=void 0;try{i=e[o]}catch(c){continue}t.push(i)}return t}for(var a=0;a<100;a++){var u=void 0;try{u=e[a]}catch(c){return t}if(!u)return t;t.push(u)}return t}function O(n){for(var e=[],r=0,t=W(n);r<t.length;r++){var o=t[r];e.push(o);for(var i=0,a=O(o);i<a.length;i++)e.push(a[i])}return e}function S(n){void 0===n&&(n=window);try{if(n.top)return n.top}catch(o){}if(m(n)===n)return n;try{if(P(window,n)&&window.top)return window.top}catch(o){}try{if(P(n,window)&&window.top)return window.top}catch(o){}for(var e=0,r=O(n);e<r.length;e++){var t=r[e];try{if(t.top)return t.top}catch(o){}if(m(t)===t)return t}}function C(n){var e=S(n);if(!e)throw new Error("Can not determine top window");var r=[].concat(O(e),[e]);return-1===r.indexOf(n)&&(r=[].concat(r,[n],O(n))),r}var D=[],j=[];function z(n,e){void 0===e&&(e=!0);try{if(n===window)return!1}catch(o){return!0}try{if(!n)return!0}catch(o){return!0}try{if(n.closed)return!0}catch(o){return!o||o.message!==p}if(e&&b(n))try{if(n.mockclosed)return!0}catch(o){}try{if(!n.parent||!n.top)return!0}catch(o){}var r=function(n,e){for(var r=0;r<n.length;r++)try{if(n[r]===e)return r}catch(o){}return-1}(D,n);if(-1!==r){var t=j[r];if(t&&function(n){if(!n.contentWindow)return!0;if(!n.parentNode)return!0;var e=n.ownerDocument;if(e&&e.documentElement&&!e.documentElement.contains(n)){for(var r=n;r.parentNode&&r.parentNode!==r;)r=r.parentNode;if(!r.host||!e.documentElement.contains(r.host))return!0}return!1}(t))return!0}return!1}function R(n){return void 0===n&&(n=window),y(n=n||window)||m(n)||void 0}function k(n,e){for(var r=0;r<n.length;r++)for(var t=n[r],o=0;o<e.length;o++)if(t===e[o])return!0;return!1}function A(n){void 0===n&&(n=window);for(var e=0,r=n;r;)(r=m(r))&&(e+=1);return e}function I(n,e){var r=S(n)||n,t=S(e)||e;try{if(r&&t)return r===t}catch(c){}var o=C(n),i=C(e);if(k(o,i))return!0;var a=y(r),u=y(t);return a&&k(C(a),i)||u&&k(C(u),o),!1}function T(n,e){if("string"==typeof n){if("string"==typeof e)return"*"===n||e===n;if(h(e))return!1;if(Array.isArray(e))return!1}return h(n)?h(e)?n.toString()===e.toString():!Array.isArray(e)&&Boolean(e.match(n)):!!Array.isArray(n)&&(Array.isArray(e)?JSON.stringify(n)===JSON.stringify(e):!h(e)&&n.some(function(n){return T(n,e)}))}function N(n){return n.match(/^(https?|mock|file):\/\//)?n.split("/").slice(0,3).join("/"):E()}function F(n,e,r,t){var o;return void 0===r&&(r=1e3),void 0===t&&(t=1/0),function i(){if(z(n))return o&&clearTimeout(o),e();t<=0?clearTimeout(o):(t-=r,o=setTimeout(i,r))}(),{cancel:function(){o&&clearTimeout(o)}}}function L(n){try{if(n===window)return!0}catch(e){if(e&&e.message===p)return!0}try{if("[object Window]"==={}.toString.call(n))return!0}catch(e){if(e&&e.message===p)return!0}try{if(window.Window&&n instanceof window.Window)return!0}catch(e){if(e&&e.message===p)return!0}try{if(n&&n.self===n)return!0}catch(e){if(e&&e.message===p)return!0}try{if(n&&n.parent===n)return!0}catch(e){if(e&&e.message===p)return!0}try{if(n&&n.top===n)return!0}catch(e){if(e&&e.message===p)return!0}try{if(n&&"__unlikely_value__"===n.__cross_domain_utils_window_check__)return!1}catch(e){return!0}try{if("postMessage"in n&&"self"in n&&"location"in n)return!0}catch(e){}return!1}function $(n){try{n.close()}catch(e){}}function M(n,e){for(var r=0;r<n.length;r++)try{if(n[r]===e)return r}catch(t){}return-1}var q,U=function(){function n(){if(this.name=void 0,this.weakmap=void 0,this.keys=void 0,this.values=void 0,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__",function(){if("undefined"==typeof WeakMap)return!1;if(void 0===Object.freeze)return!1;try{var n=new WeakMap,e={};return Object.freeze(e),n.set(e,"__testvalue__"),"__testvalue__"===n.get(e)}catch(r){return!1}}())try{this.weakmap=new WeakMap}catch(n){}this.keys=[],this.values=[]}var e=n.prototype;return e._cleanupClosedWindows=function(){for(var n=this.weakmap,e=this.keys,r=0;r<e.length;r++){var t=e[r];if(L(t)&&z(t)){if(n)try{n.delete(t)}catch(o){}e.splice(r,1),this.values.splice(r,1),r-=1}}},e.isSafeToReadWrite=function(n){return!L(n)},e.set=function(n,e){if(!n)throw new Error("WeakMap expected key");var r=this.weakmap;if(r)try{r.set(n,e)}catch(c){delete this.weakmap}if(this.isSafeToReadWrite(n))try{var t=this.name,o=n[t];return void(o&&o[0]===n?o[1]=e:Object.defineProperty(n,t,{value:[n,e],writable:!0}))}catch(c){}this._cleanupClosedWindows();var i=this.keys,a=this.values,u=M(i,n);-1===u?(i.push(n),a.push(e)):a[u]=e},e.get=function(n){if(!n)throw new Error("WeakMap expected key");var e=this.weakmap;if(e)try{if(e.has(n))return e.get(n)}catch(o){delete this.weakmap}if(this.isSafeToReadWrite(n))try{var r=n[this.name];return r&&r[0]===n?r[1]:void 0}catch(o){}this._cleanupClosedWindows();var t=M(this.keys,n);if(-1!==t)return this.values[t]},e.delete=function(n){if(!n)throw new Error("WeakMap expected key");var e=this.weakmap;if(e)try{e.delete(n)}catch(i){delete this.weakmap}if(this.isSafeToReadWrite(n))try{var r=n[this.name];r&&r[0]===n&&(r[0]=r[1]=void 0)}catch(i){}this._cleanupClosedWindows();var t=this.keys,o=M(t,n);-1!==o&&(t.splice(o,1),this.values.splice(o,1))},e.has=function(n){if(!n)throw new Error("WeakMap expected key");var e=this.weakmap;if(e)try{if(e.has(n))return!0}catch(t){delete this.weakmap}if(this.isSafeToReadWrite(n))try{var r=n[this.name];return!(!r||r[0]!==n)}catch(t){}return this._cleanupClosedWindows(),-1!==M(this.keys,n)},e.getOrSet=function(n,e){if(this.has(n))return this.get(n);var r=e();return this.set(n,r),r},n}();function B(n){return n.name||n.__name__||n.displayName||"anonymous"}function J(n,e){try{delete n.name,n.name=e}catch(r){}return n.__name__=n.displayName=e,n}function H(n){if("function"==typeof btoa)return btoa(encodeURIComponent(n).replace(/%([0-9A-F]{2})/g,function(n,e){return String.fromCharCode(parseInt(e,16))}));if(void 0!==qa)return qa.from(n,"utf8").toString("base64");throw new Error("Can not find window.btoa or Buffer")}function Y(){var n="0123456789abcdef";return"xxxxxxxxxx".replace(/./g,function(){return n.charAt(Math.floor(Math.random()*n.length))})+"_"+H(new Date().toISOString().slice(11,19).replace("T",".")).replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}function Z(n){try{return JSON.stringify([].slice.call(n),function(n,e){return"function"==typeof e?"memoize["+function(n){if(q=q||new U,null==n||"object"!=typeof n&&"function"!=typeof n)throw new Error("Invalid object");var e=q.get(n);return e||(e=typeof n+":"+Y(),q.set(n,e)),e}(e)+"]":e})}catch(e){throw new Error("Arguments not serializable -- can not be used to memoize")}}var V,G=[];function X(n,e){var r=this;void 0===e&&(e={});var t=new U,o=function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];var a=t.getOrSet(e.thisNamespace?this:n,function(){return{}}),u=Z(o),c=e.time;if(a[u]&&c&&Date.now()-a[u].time<c&&delete a[u],a[u])return a[u].value;var s=Date.now(),f=n.apply(this,arguments);return a[u]={time:s,value:f},a[u].value};return o.reset=function(){t.delete(e.thisNamespace?r:n)},G.push(o),J(o,(e.name||B(n))+"::memoized")}function K(n){var e={};function r(){for(var r=arguments,t=this,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];var u=Z(i);return e.hasOwnProperty(u)?e[u]:(e[u]=l.try(function(){return n.apply(t,r)}).finally(function(){delete e[u]}),e[u])}return r.reset=function(){e={}},J(r,B(n)+"::promiseMemoized")}function Q(n,e,r){void 0===r&&(r=[]);var t=n.__inline_memoize_cache__=n.__inline_memoize_cache__||{},o=Z(r);return t.hasOwnProperty(o)?t[o]:t[o]=e.apply(void 0,r)}function nn(){}function en(n){var e=!1;return J(function(){if(!e)return e=!0,n.apply(this,arguments)},B(n)+"::once")}function rn(n,e){if(void 0===e&&(e=1),e>=3)return"stringifyError stack overflow";try{if(!n)return"<unknown error: "+{}.toString.call(n)+">";if("string"==typeof n)return n;if(n instanceof Error){var r=n&&n.stack,t=n&&n.message;if(r&&t)return-1!==r.indexOf(t)?r:t+"\n"+r;if(r)return r;if(t)return t}return n&&n.toString&&"function"==typeof n.toString?n.toString():{}.toString.call(n)}catch(o){return"Error while stringifying error: "+rn(o,e+1)}}function tn(n){return"string"==typeof n?n:n&&n.toString&&"function"==typeof n.toString?n.toString():{}.toString.call(n)}function on(n,e){if(!e)return n;if(Object.assign)return Object.assign(n,e);for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}function an(n,e){var r;return function t(){r=setTimeout(function(){n(),t()},e)}(),{cancel:function(){clearTimeout(r)}}}function un(n){return[].slice.call(n)}function cn(n){return null!=n}function sn(n){return"[object RegExp]"==={}.toString.call(n)}function fn(n,e,r){if(n.hasOwnProperty(e))return n[e];var t=r();return n[e]=t,t}function dn(n){var e=[],r=!1;return{set:function(e,t){return r||(n[e]=t,this.register(function(){delete n[e]})),t},register:function(n){r?n():e.push(en(n))},all:function(){var n=[];for(r=!0;e.length;){var t=e.shift();n.push(t())}return l.all(n).then(nn)}}}function ln(n,e){if(null==e)throw new Error("Expected "+n+" to be present");return e}function hn(){return Boolean(document.body)&&"complete"===document.readyState}function wn(n){return n.replace(/\?/g,"%3F").replace(/&/g,"%26").replace(/#/g,"%23").replace(/\+/g,"%2B")}function pn(){return Q(pn,function(){return new l(function(n){if(hn())return n();var e=setInterval(function(){if(hn())return clearInterval(e),n()},10)})})}function vn(n){return Q(vn,function(){var e={};if(!n)return e;if(-1===n.indexOf("="))return e;for(var r=0,t=n.split("&");r<t.length;r++){var o=t[r];(o=o.split("="))[0]&&o[1]&&(e[decodeURIComponent(o[0])]=decodeURIComponent(o[1]))}return e},[n])}function mn(n,e){return void 0===e&&(e={}),e&&Object.keys(e).length?(void 0===(r=t({},vn(n),e))&&(r={}),Object.keys(r).filter(function(n){return"string"==typeof r[n]}).map(function(n){return wn(n)+"="+wn(r[n])}).join("&")):n;var r}function yn(n){return n instanceof window.Element||null!==n&&"object"==typeof n&&1===n.nodeType&&"object"==typeof n.style&&"object"==typeof n.ownerDocument}function gn(n,e){return void 0===e&&(e=document),yn(n)?n:"string"==typeof n?e.querySelector(n):void 0}function _n(n){this.message=n}function En(n){if((V=V||new U).has(n)){var e=V.get(n);if(e)return e}var r=new l(function(e,r){n.addEventListener("load",function(){!function(n){if(function(){for(var n=0;n<D.length;n++){var e=!1;try{e=D[n].closed}catch(r){}e&&(j.splice(n,1),D.splice(n,1))}}(),n&&n.contentWindow)try{D.push(n.contentWindow),j.push(n)}catch(e){}}(n),e(n)}),n.addEventListener("error",function(t){n.contentWindow?e(n):r(t)})});return V.set(n,r),r}function bn(n){return En(n).then(function(n){if(!n.contentWindow)throw new Error("Could not find window in iframe");return n.contentWindow})}function xn(n,e){void 0===n&&(n={});var r=n.style||{},o=function(n,e,r){void 0===n&&(n="div"),void 0===e&&(e={}),n=n.toLowerCase();var t,o,i,a=document.createElement(n);if(e.style&&on(a.style,e.style),e.class&&(a.className=e.class.join(" ")),e.id&&a.setAttribute("id",e.id),e.attributes)for(var u=0,c=Object.keys(e.attributes);u<c.length;u++){var s=c[u];a.setAttribute(s,e.attributes[s])}if(e.styleSheet&&(t=a,o=e.styleSheet,void 0===i&&(i=window.document),t.styleSheet?t.styleSheet.cssText=o:t.appendChild(i.createTextNode(o))),e.html){if("iframe"===n)throw new Error("Iframe html can not be written unless container provided and iframe in DOM");a.innerHTML=e.html}return a}("iframe",{attributes:t({allowTransparency:"true"},n.attributes||{}),style:t({backgroundColor:"transparent",border:"none"},r),html:n.html,class:n.class}),i=window.navigator.userAgent.match(/MSIE|Edge/i);return o.hasAttribute("id")||o.setAttribute("id",Y()),En(o),e&&function(n,e){void 0===e&&(e=document);var r=gn(n,e);if(r)return r;throw new Error("Can not find element: "+tn(n))}(e).appendChild(o),(n.url||i)&&o.setAttribute("src",n.url||"about:blank"),o}function Pn(n,e,r){return n.addEventListener(e,r),{cancel:function(){n.removeEventListener(e,r)}}}function Wn(n){n.style.setProperty("display","")}function On(n){n.style.setProperty("display","none","important")}function Sn(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function Cn(n){return!n||!n.parentNode}function Dn(n,e,r){var t=void 0===r?{}:r,o=t.width,i=void 0===o||o,a=t.height,u=void 0===a||a,c=t.interval,s=void 0===c?100:c,f=t.win,d=void 0===f?window:f,l=n.offsetWidth,h=n.offsetHeight;e({width:l,height:h});var w,p,v=function(){var r=n.offsetWidth,t=n.offsetHeight;(i&&r!==l||u&&t!==h)&&e({width:r,height:t}),l=r,h=t};return void 0!==d.ResizeObserver?(w=new d.ResizeObserver(v)).observe(n):void 0!==d.MutationObserver?((w=new d.MutationObserver(v)).observe(n,{attributes:!0,childList:!0,subtree:!0,characterData:!1}),d.addEventListener("resize",v)):function n(){v(),p=setTimeout(n,s)}(),{cancel:function(){w.disconnect(),window.removeEventListener("resize",v),clearTimeout(p)}}}function jn(n){for(;n.parentNode;)n=n.parentNode;return"[object ShadowRoot]"===n.toString()}function zn(n){return function(n){if("number"==typeof n)return n;var e=n.match(/^([0-9]+)(px|%)$/);if(!e)throw new Error("Could not match css value from "+n);return parseInt(e[1],10)}(n)+"px"}function Rn(n){return"number"==typeof n?zn(n):"string"==typeof(e=n)&&/^[0-9]+%$/.test(e)?n:zn(n);var e}function kn(n){return void 0===n&&(n=window),n!==window?n.__post_robot_10_0_37__:n.__post_robot_10_0_37__=n.__post_robot_10_0_37__||{}}X.clear=function(){for(var n=0;n<G.length;n++)G[n].reset()},_n.prototype=Object.create(Error.prototype);var An=function(){return{}};function In(n,e){return void 0===n&&(n="store"),void 0===e&&(e=An),fn(kn(),n,function(){var n=e();return{has:function(e){return n.hasOwnProperty(e)},get:function(e,r){return n.hasOwnProperty(e)?n[e]:r},set:function(e,r){return n[e]=r,r},del:function(e){delete n[e]},getOrSet:function(e,r){return fn(n,e,r)},reset:function(){n=e()},keys:function(){return Object.keys(n)}}})}var Tn,Nn=function(){};function Fn(){var n=kn();return n.WINDOW_WILDCARD=n.WINDOW_WILDCARD||new Nn,n.WINDOW_WILDCARD}function Ln(n,e){return void 0===n&&(n="store"),void 0===e&&(e=An),In("windowStore").getOrSet(n,function(){var r=new U,t=function(n){return r.getOrSet(n,e)};return{has:function(e){return t(e).hasOwnProperty(n)},get:function(e,r){var o=t(e);return o.hasOwnProperty(n)?o[n]:r},set:function(e,r){return t(e)[n]=r,r},del:function(e){delete t(e)[n]},getOrSet:function(e,r){return fn(t(e),n,r)}}})}function $n(){return In("instance").getOrSet("instanceID",Y)}function Mn(n,e){var r=e.domain,t=Ln("helloPromises"),o=t.get(n);o&&o.resolve({domain:r});var i=l.resolve({domain:r});return t.set(n,i),i}function qn(n,e){return(0,e.send)(n,"postrobot_hello",{instanceID:$n()},{domain:"*",timeout:-1}).then(function(e){var r=e.origin,t=e.data.instanceID;return Mn(n,{domain:r}),{win:n,domain:r,instanceID:t}})}function Un(n,e){var r=e.send;return Ln("windowInstanceIDPromises").getOrSet(n,function(){return qn(n,{send:r}).then(function(n){return n.instanceID})})}function Bn(n){Ln("knownWindows").set(n,!0)}function Jn(n){return"object"==typeof n&&null!==n&&"string"==typeof n.__type__}function Hn(n){return void 0===n?"undefined":null===n?"null":Array.isArray(n)?"array":"function"==typeof n?"function":"object"==typeof n?n instanceof Error?"error":"function"==typeof n.then?"promise":"[object RegExp]"==={}.toString.call(n)?"regex":"[object Date]"==={}.toString.call(n)?"date":"object":"string"==typeof n?"string":"number"==typeof n?"number":"boolean"==typeof n?"boolean":void 0}function Yn(n,e){return{__type__:n,__val__:e}}var Zn,Vn=((Tn={}).function=function(){},Tn.error=function(n){return Yn("error",{message:n.message,stack:n.stack,code:n.code,data:n.data})},Tn.promise=function(){},Tn.regex=function(n){return Yn("regex",n.source)},Tn.date=function(n){return Yn("date",n.toJSON())},Tn.array=function(n){return n},Tn.object=function(n){return n},Tn.string=function(n){return n},Tn.number=function(n){return n},Tn.boolean=function(n){return n},Tn.null=function(n){return n},Tn),Gn={},Xn=((Zn={}).function=function(){throw new Error("Function serialization is not implemented; nothing to deserialize")},Zn.error=function(n){var e=n.stack,r=n.code,t=n.data,o=new Error(n.message);return o.code=r,t&&(o.data=t),o.stack=e+"\n\n"+o.stack,o},Zn.promise=function(){throw new Error("Promise serialization is not implemented; nothing to deserialize")},Zn.regex=function(n){return new RegExp(n)},Zn.date=function(n){return new Date(n)},Zn.array=function(n){return n},Zn.object=function(n){return n},Zn.string=function(n){return n},Zn.number=function(n){return n},Zn.boolean=function(n){return n},Zn.null=function(n){return n},Zn),Kn={};function Qn(){for(var n=In("idToProxyWindow"),e=0,r=n.keys();e<r.length;e++){var t=r[e];n.get(t).shouldClean()&&n.del(t)}}function ne(n,e){var r=e.send,t=e.id,o=void 0===t?Y():t,i=n.then(function(n){if(b(n))return x(n).name}),a=n.then(function(n){if(z(n))throw new Error("Window is closed, can not determine type");return y(n)?w.POPUP:w.IFRAME});return i.catch(nn),a.catch(nn),{id:o,getType:function(){return a},getInstanceID:K(function(){return n.then(function(n){return Un(n,{send:r})})}),close:function(){return n.then($)},getName:function(){return n.then(function(n){if(!z(n))return b(n)?x(n).name:i})},focus:function(){return n.then(function(n){n.focus()})},isClosed:function(){return n.then(function(n){return z(n)})},setLocation:function(e){return n.then(function(n){var r=window.location.protocol+"//"+window.location.host;if(0===e.indexOf("/"))e=""+r+e;else if(!e.match(/^https?:\/\//)&&0!==e.indexOf(r))throw new Error("Expected url to be http or https url, or absolute path, got "+JSON.stringify(e));if(b(n))try{if(n.location&&"function"==typeof n.location.replace)return void n.location.replace(e)}catch(t){}n.location=e})},setName:function(e){return n.then(function(n){var r=b(n),t=function(n){if(b(n))return x(n).frameElement;for(var e=0,r=document.querySelectorAll("iframe");e<r.length;e++){var t=r[e];if(t&&t.contentWindow&&t.contentWindow===n)return t}}(n);if(!r)throw new Error("Can not set name for cross-domain window: "+e);x(n).name=e,t&&t.setAttribute("name",e),i=l.resolve(e)})}}}new l(function(n){if(window.document&&window.document.body)return n(window.document.body);var e=setInterval(function(){if(window.document&&window.document.body)return clearInterval(e),n(window.document.body)},10)});var ee=function(){function n(n){var e=n.send,r=n.win,t=n.serializedWindow;this.id=void 0,this.isProxyWindow=!0,this.serializedWindow=void 0,this.actualWindow=void 0,this.actualWindowPromise=void 0,this.send=void 0,this.name=void 0,this.actualWindowPromise=new l,this.serializedWindow=t||ne(this.actualWindowPromise,{send:e}),In("idToProxyWindow").set(this.getID(),this),r&&this.setWindow(r,{send:e})}var e=n.prototype;return e.getID=function(){return this.serializedWindow.id},e.getType=function(){return this.serializedWindow.getType()},e.isPopup=function(){return this.getType().then(function(n){return n===w.POPUP})},e.setLocation=function(n){var e=this;return this.serializedWindow.setLocation(n).then(function(){return e})},e.getName=function(){return this.serializedWindow.getName()},e.setName=function(n){var e=this;return this.serializedWindow.setName(n).then(function(){return e})},e.close=function(){var n=this;return this.serializedWindow.close().then(function(){return n})},e.focus=function(){var n=this,e=this.isPopup(),r=this.getName(),t=l.hash({isPopup:e,name:r}).then(function(n){var e=n.name;n.isPopup&&e&&window.open("",e)}),o=this.serializedWindow.focus();return l.all([t,o]).then(function(){return n})},e.isClosed=function(){return this.serializedWindow.isClosed()},e.getWindow=function(){return this.actualWindow},e.setWindow=function(n,e){var r=e.send;this.actualWindow=n,this.actualWindowPromise.resolve(this.actualWindow),this.serializedWindow=ne(this.actualWindowPromise,{send:r,id:this.getID()}),Ln("winToProxyWindow").set(n,this)},e.awaitWindow=function(){return this.actualWindowPromise},e.matchWindow=function(n,e){var r=this,t=e.send;return l.try(function(){return r.actualWindow?n===r.actualWindow:l.hash({proxyInstanceID:r.getInstanceID(),knownWindowInstanceID:Un(n,{send:t})}).then(function(e){var o=e.proxyInstanceID===e.knownWindowInstanceID;return o&&r.setWindow(n,{send:t}),o})})},e.unwrap=function(){return this.actualWindow||this},e.getInstanceID=function(){return this.serializedWindow.getInstanceID()},e.shouldClean=function(){return Boolean(this.actualWindow&&z(this.actualWindow))},e.serialize=function(){return this.serializedWindow},n.unwrap=function(e){return n.isProxyWindow(e)?e.unwrap():e},n.serialize=function(e,r){var t=r.send;return Qn(),n.toProxyWindow(e,{send:t}).serialize()},n.deserialize=function(e,r){var t=r.send;return Qn(),In("idToProxyWindow").get(e.id)||new n({serializedWindow:e,send:t})},n.isProxyWindow=function(n){return Boolean(n&&!L(n)&&n.isProxyWindow)},n.toProxyWindow=function(e,r){var t=r.send;if(Qn(),n.isProxyWindow(e))return e;var o=e;return Ln("winToProxyWindow").get(o)||new n({win:o,send:t})},n}();function re(n,e,r,t,o){var i=Ln("methodStore"),a=In("proxyWindowMethods");ee.isProxyWindow(t)?a.set(n,{val:e,name:r,domain:o,source:t}):(a.del(n),i.getOrSet(t,function(){return{}})[n]={domain:o,name:r,val:e,source:t})}function te(n,e){var r=Ln("methodStore"),t=In("proxyWindowMethods");return r.getOrSet(n,function(){return{}})[e]||t.get(e)}function oe(n,e,r,t,o){var i,a,u;a=(i={on:o.on,send:o.send}).on,u=i.send,In("builtinListeners").getOrSet("functionCalls",function(){return a("postrobot_method",{domain:"*"},function(n){var e=n.source,r=n.origin,t=n.data,o=t.id,i=t.name,a=te(e,o);if(!a)throw new Error("Could not find method '"+i+"' with id: "+t.id+" in "+E(window));var c=a.source,s=a.domain,f=a.val;return l.try(function(){if(!T(s,r))throw new Error("Method '"+t.name+"' domain "+JSON.stringify(sn(a.domain)?a.domain.source:a.domain)+" does not match origin "+r+" in "+E(window));if(ee.isProxyWindow(c))return c.matchWindow(e,{send:u}).then(function(n){if(!n)throw new Error("Method call '"+t.name+"' failed - proxy window does not match source in "+E(window))})}).then(function(){return f.apply({source:e,origin:r},t.args)},function(n){return l.try(function(){if(f.onError)return f.onError(n)}).then(function(){var e;throw n.stack&&(n.stack="Remote call to "+i+"("+(void 0===(e=t.args)&&(e=[]),un(e).map(function(n){return"string"==typeof n?"'"+n+"'":void 0===n?"undefined":null===n?"null":"boolean"==typeof n?n.toString():Array.isArray(n)?"[ ... ]":"object"==typeof n?"{ ... }":"function"==typeof n?"() => { ... }":"<"+typeof n+">"}).join(", "))+") failed\n\n"+n.stack),n})}).then(function(n){return{result:n,id:o,name:i}})})});var c=r.__id__||Y();n=ee.unwrap(n);var s=r.__name__||r.name||t;return"string"==typeof s&&"function"==typeof s.indexOf&&0===s.indexOf("anonymous::")&&(s=s.replace("anonymous::",t+"::")),ee.isProxyWindow(n)?(re(c,r,s,n,e),n.awaitWindow().then(function(n){re(c,r,s,n,e)})):re(c,r,s,n,e),Yn("cross_domain_function",{id:c,name:s})}function ie(n,e,r,t){var o,i=t.on,a=t.send;return function(n,e){void 0===e&&(e=Gn);var r=JSON.stringify(n,function(n){var r=this[n];if(Jn(this))return r;var t=Hn(r);if(!t)return r;var o=e[t]||Vn[t];return o?o(r,n):r});return void 0===r?"undefined":r}(r,((o={}).promise=function(r,t){return function(n,e,r,t,o){return Yn("cross_domain_zalgo_promise",{then:oe(n,e,function(n,e){return r.then(n,e)},t,{on:o.on,send:o.send})})}(n,e,r,t,{on:i,send:a})},o.function=function(r,t){return oe(n,e,r,t,{on:i,send:a})},o.object=function(n){return L(n)||ee.isProxyWindow(n)?Yn("cross_domain_window",ee.serialize(n,{send:a})):n},o))}function ae(n,e,r,t){var o,i=t.send;return function(n,e){if(void 0===e&&(e=Kn),"undefined"!==n)return JSON.parse(n,function(n,r){if(Jn(this))return r;var t,o;if(Jn(r)?(t=r.__type__,o=r.__val__):(t=Hn(r),o=r),!t)return o;var i=e[t]||Xn[t];return i?i(o,n):o})}(r,((o={}).cross_domain_zalgo_promise=function(n){return new l(n.then)},o.cross_domain_function=function(r){return function(n,e,r,t){var o=r.id,i=r.name,a=t.send,u=function(r){function t(){var u=arguments;return ee.toProxyWindow(n,{send:a}).awaitWindow().then(function(n){var c=te(n,o);if(c&&c.val!==t)return c.val.apply({source:window,origin:E()},u);var s={domain:e,fireAndForget:r.fireAndForget},f=[].slice.call(u);return a(n,"postrobot_method",{id:o,name:i,args:f},s).then(function(n){if(!r.fireAndForget)return n.data.result})}).catch(function(n){throw n})}return void 0===r&&(r={}),t.__name__=i,t.__origin__=e,t.__source__=n,t.__id__=o,t.origin=e,t},c=u();return c.fireAndForget=u({fireAndForget:!0}),c}(n,e,r,{send:i})},o.cross_domain_window=function(n){return ee.deserialize(n,{send:i})},o))}var ue,ce={};function se(n,e,r,o){var i,a=o.on,u=o.send;if(z(n))throw new Error("Window is closed");for(var c=ie(n,e,((i={}).__post_robot_10_0_37__=t({id:Y(),origin:E(window)},r),i),{on:a,send:u}),s=Object.keys(ce),f=[],d=0;d<s.length;d++){var l=s[d];try{ce[l](n,c,e)}catch(h){f.push(h)}}if(f.length===s.length)throw new Error("All post-robot messaging strategies failed:\n\n"+f.map(function(n,e){return e+". "+rn(n)}).join("\n\n"))}function fe(n){return In("responseListeners").get(n)}function de(n){In("responseListeners").del(n)}function le(n){return In("erroredResponseListeners").has(n)}function he(n){var e=n.name,r=n.win,t=n.domain,o=Ln("requestListeners");if("*"===r&&(r=null),"*"===t&&(t=null),!e)throw new Error("Name required to get request listener");for(var i=0,a=[r,Fn()];i<a.length;i++){var u=a[i];if(u){var c=o.get(u);if(c){var s=c[e];if(s){if(t&&"string"==typeof t){if(s[t])return s[t];if(s.__domain_regex__)for(var f=0,d=s.__domain_regex__;f<d.length;f++){var l=d[f],h=l.listener;if(T(l.regex,t))return h}}if(s["*"])return s["*"]}}}}}ce.postrobot_post_message=function(n,e,r){(Array.isArray(r)?r:"string"==typeof r?[r]:["*"]).map(function(n){return 0===n.indexOf("file:")?"*":n}).forEach(function(r){n.postMessage(e,r)})},ce.postrobot_global=function(n,e){if(!function(n){return(n=n||window).navigator.mockUserAgent||n.navigator.userAgent}(window).match(/MSIE|rv:11|trident|edge\/12|edge\/13/i))throw new Error("Global messaging not needed for browser");if(!b(n))throw new Error("Post message through global disabled between different domain windows");if(!1!==I(window,n))throw new Error("Can only use global to communicate between two different windows, not between frames");var r=kn(n);if(!r)throw new Error("Can not find postRobot global on foreign window");r.receiveMessage({source:window,origin:E(),data:e})};var we=((ue={}).postrobot_message_request=function(n,e,r,o){var i=o.on,a=o.send,u=he({name:r.name,win:n,domain:e}),c="postrobot_method"===r.name&&r.data&&"string"==typeof r.data.name?r.data.name+"()":r.name;function s(o,u,s){if(void 0===s&&(s={}),!r.fireAndForget&&!z(n))try{se(n,e,t({type:o,ack:u,hash:r.hash,name:r.name},s),{on:i,send:a})}catch(f){throw new Error("Send response message failed for "+c+" in "+E()+"\n\n"+rn(f))}}return l.all([s("postrobot_message_ack"),l.try(function(){if(!u)throw new Error("No handler found for post message: "+r.name+" from "+e+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!T(u.domain,e))throw new Error("Request origin "+e+" does not match domain "+u.domain.toString());return u.handler({source:n,origin:e,data:r.data})}).then(function(n){return s("postrobot_message_response","success",{data:n})},function(n){return s("postrobot_message_response","error",{error:n})})]).then(nn).catch(function(n){if(u&&u.handleError)return u.handleError(n);throw n})},ue.postrobot_message_ack=function(n,e,r){if(!le(r.hash)){var t=fe(r.hash);if(!t)throw new Error("No handler found for post message ack for message: "+r.name+" from "+e+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);try{if(!T(t.domain,e))throw new Error("Ack origin "+e+" does not match domain "+t.domain.toString());if(n!==t.win)throw new Error("Ack source does not match registered window")}catch(o){t.promise.reject(o)}t.ack=!0}},ue.postrobot_message_response=function(n,e,r){if(!le(r.hash)){var t,o=fe(r.hash);if(!o)throw new Error("No handler found for post message response for message: "+r.name+" from "+e+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!T(o.domain,e))throw new Error("Response origin "+e+" does not match domain "+(t=o.domain,Array.isArray(t)?"("+t.join(" | ")+")":h(t)?"RegExp("+t.toString():t.toString()));if(n!==o.win)throw new Error("Response source does not match registered window");de(r.hash),"error"===r.ack?o.promise.reject(r.error):"success"===r.ack&&o.promise.resolve({source:n,origin:e,data:r.data})}},ue);function pe(n,e){var r=e.on,t=e.send,o=In("receivedMessages");try{if(!window||window.closed||!n.source)return}catch(c){return}var i=n.source,a=n.origin,u=function(n,e,r,t){var o,i=t.on,a=t.send;try{o=ae(e,r,n,{on:i,send:a})}catch(c){return}if(o&&"object"==typeof o&&null!==o&&(o=o.__post_robot_10_0_37__)&&"object"==typeof o&&null!==o&&o.type&&"string"==typeof o.type&&we[o.type])return o}(n.data,i,a,{on:r,send:t});u&&(Bn(i),o.has(u.id)||(o.set(u.id,!0),z(i)&&!u.fireAndForget||(0===u.origin.indexOf("file:")&&(a="file://"),we[u.type](i,a,u,{on:r,send:t}))))}function ve(n,e,r){if(!n)throw new Error("Expected name");if("function"==typeof e&&(r=e,e={}),!r)throw new Error("Expected handler");(e=e||{}).name=n,e.handler=r||e.handler;var t=e.window,o=e.domain,i=function n(e,r){var t=e.name,o=e.win,i=e.domain,a=Ln("requestListeners");if(!t||"string"!=typeof t)throw new Error("Name required to add request listener");if(Array.isArray(o)){for(var u=[],c=0,s=o;c<s.length;c++)u.push(n({name:t,domain:i,win:s[c]},r));return{cancel:function(){for(var n=0;n<u.length;n++)u[n].cancel()}}}if(Array.isArray(i)){for(var f=[],d=0,l=i;d<l.length;d++)f.push(n({name:t,win:o,domain:l[d]},r));return{cancel:function(){for(var n=0;n<f.length;n++)f[n].cancel()}}}var h=he({name:t,win:o,domain:i});if(o&&"*"!==o||(o=Fn()),i=i||"*",h)throw o&&i?new Error("Request listener already exists for "+t+" on domain "+i.toString()+" for "+(o===Fn()?"wildcard":"specified")+" window"):o?new Error("Request listener already exists for "+t+" for "+(o===Fn()?"wildcard":"specified")+" window"):i?new Error("Request listener already exists for "+t+" on domain "+i.toString()):new Error("Request listener already exists for "+t);var w,p,v=a.getOrSet(o,function(){return{}}),m=fn(v,t,function(){return{}}),y=i.toString();return sn(i)?(w=fn(m,"__domain_regex__",function(){return[]})).push(p={regex:i,listener:r}):m[y]=r,{cancel:function(){delete m[y],p&&(w.splice(w.indexOf(p,1)),w.length||delete m.__domain_regex__),Object.keys(m).length||delete v[t],o&&!Object.keys(v).length&&a.del(o)}}}({name:n,win:t,domain:o},{handler:e.handler,handleError:e.errorHandler||function(n){throw n},window:t,domain:o||"*",name:n});return{cancel:function(){i.cancel()}}}var me=function n(e,r,t,o){var i=(o=o||{}).domain||"*",a=o.timeout||-1,u=o.timeout||5e3,c=o.fireAndForget||!1;return l.try(function(){if(function(n,e,r){if(!n)throw new Error("Expected name");if(r&&"string"!=typeof r&&!Array.isArray(r)&&!sn(r))throw new TypeError("Can not send "+n+". Expected domain "+JSON.stringify(r)+" to be a string, array, or regex");if(z(e))throw new Error("Can not send "+n+". Target window is closed")}(r,e,i),function(n,e){var r=R(e);if(r)return r===n;if(e===n)return!1;if(S(e)===e)return!1;for(var t=0,o=W(n);t<o.length;t++)if(o[t]===e)return!0;return!1}(window,e))return function(n,e,r){void 0===e&&(e=5e3),void 0===r&&(r="Window");var t=function(n){return Ln("helloPromises").getOrSet(n,function(){return new l})}(n);return-1!==e&&(t=t.timeout(e,new Error(r+" did not load after "+e+"ms"))),t}(e,u)}).then(function(r){return function(n,e,r,t){var o=t.send;return"string"==typeof e?l.resolve(e):l.try(function(){return r||qn(n,{send:o}).then(function(n){return n.domain})}).then(function(n){if(!T(e,e))throw new Error("Domain "+tn(e)+" does not match "+tn(e));return n})}(e,i,(void 0===r?{}:r).domain,{send:n})}).then(function(o){i=o;var u="postrobot_method"===r&&t&&"string"==typeof t.name?t.name+"()":r,s=new l,f=r+"_"+Y();if(!c){var d={name:r,win:e,domain:i,promise:s};!function(n,e){In("responseListeners").set(n,e)}(f,d);var h=Ln("requestPromises").getOrSet(e,function(){return[]});h.push(s),s.catch(function(){!function(n){In("erroredResponseListeners").set(n,!0)}(f),de(f)});var w=function(n){return Ln("knownWindows").get(n,!1)}(e)?1e4:2e3,p=a,v=w,m=p,y=an(function(){return z(e)?s.reject(new Error("Window closed for "+r+" before "+(d.ack?"response":"ack"))):d.cancelled?s.reject(new Error("Response listener was cancelled for "+r)):(v=Math.max(v-500,0),-1!==m&&(m=Math.max(m-500,0)),d.ack||0!==v?0===m?s.reject(new Error("No response for postMessage "+u+" in "+E()+" in "+p+"ms")):void 0:s.reject(new Error("No ack for postMessage "+u+" in "+E()+" in "+w+"ms")))},500);s.finally(function(){y.cancel(),h.splice(h.indexOf(s,1))}).catch(nn)}try{se(e,i,{type:"postrobot_message_request",hash:f,name:r,data:t,fireAndForget:c},{on:ve,send:n})}catch(g){throw new Error("Send request message failed for "+u+" in "+E()+"\n\n"+rn(g))}return c?s.resolve():s})};function ye(n,e,r){return ie(n,e,r,{on:ve,send:me})}function ge(n,e,r){return ae(n,e,r,{on:ve,send:me})}function _e(n){return ee.toProxyWindow(n,{send:me})}function Ee(n){if(void 0===n&&(n=window),!b(n))throw new Error("Can not get global for window on different domain");return n.__zoid_9_0_47__||(n.__zoid_9_0_47__={}),n.__zoid_9_0_47__}function be(n){return{get:function(){var e=this;return l.try(function(){if(e.source&&e.source!==window)throw new Error("Can not call get on proxy object from a remote window");return n})}}}var xe={STRING:"string",OBJECT:"object",FUNCTION:"function",BOOLEAN:"boolean",NUMBER:"number",ARRAY:"array"},Pe={JSON:"json",DOTIFY:"dotify",BASE64:"base64"},We=w,Oe={RENDER:"zoid-render",RENDERED:"zoid-rendered",DISPLAY:"zoid-display",ERROR:"zoid-error",CLOSE:"zoid-close",DESTROY:"zoid-destroy",PROPS:"zoid-props",RESIZE:"zoid-resize",FOCUS:"zoid-focus"};function Se(n,e,r,t,o){if(!n.hasOwnProperty(r))return t;var i=n[r];return"function"==typeof i.childDecorate?i.childDecorate({value:t,close:o.close,focus:o.focus,onError:o.onError,onProps:o.onProps,resize:o.resize,getParent:o.getParent,getParentDomain:o.getParentDomain,show:o.show,hide:o.hide}):t}function Ce(n){return Q(Ce,function(){if(!n)throw new Error("No window name");var e=n.split("__"),r=e[1],t=e[2],o=e[3];if("zoid"!==r)throw new Error("Window not rendered by zoid - got "+r);if(!t)throw new Error("Expected component name");if(!o)throw new Error("Expected encoded payload");try{return JSON.parse(function(n){if("function"==typeof atob)return decodeURIComponent([].map.call(atob(n),function(n){return"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)}).join(""));if(void 0!==qa)return qa.from(n,"base64").toString("utf8");throw new Error("Can not find window.atob or Buffer")}(o))}catch(i){throw new Error("Can not decode window name payload: "+o+": "+rn(i))}},[n])}function De(){try{return Ce(window.name)}catch(n){}}function je(){return l.try(function(){window.focus()})}function ze(){return l.try(function(){window.close()})}function Re(n,e,r){return l.try(function(){return"function"==typeof n.queryParam?n.queryParam({value:r}):"string"==typeof n.queryParam?n.queryParam:e})}function ke(n,e,r){return l.try(function(){return"function"==typeof n.queryValue&&cn(r)?n.queryValue({value:r}):r})}function Ae(n,e,r){void 0===e&&(e={}),void 0===r&&(r=window);var o,i,a,u,c,s=n.propsDef,f=n.containerTemplate,d=n.prerenderTemplate,h=n.tag,w=n.name,p=n.attributes,v=n.dimensions,m=n.autoResize,y=n.url,g=n.domain,_=new l,P=[],W=dn(),O={},S=e.event?e.event:(o={},i={},{on:function(n,e){var r=i[n]=i[n]||[];r.push(e);var t=!1;return{cancel:function(){t||(t=!0,r.splice(r.indexOf(e),1))}}},once:function(n,e){var r=this.on(n,function(){r.cancel(),e()});return r},trigger:function(n){for(var e=arguments.length,r=new Array(e>1?e-1:0),t=1;t<e;t++)r[t-1]=arguments[t];var o=i[n],a=[];if(o)for(var u=function(n){var e=o[n];a.push(l.try(function(){return e.apply(void 0,r)}))},c=0;c<o.length;c++)u(c);return l.all(a).then(nn)},triggerOnce:function(n){if(o[n])return l.resolve();o[n]=!0;for(var e=arguments.length,r=new Array(e>1?e-1:0),t=1;t<e;t++)r[t-1]=arguments[t];return this.trigger.apply(this,[n].concat(r))},reset:function(){i={}}}),C=e.props?e.props:{},D=!0,j=e.onError,R=e.getProxyContainer,k=e.show,L=e.hide,$=e.close,M=e.renderContainer,q=e.getProxyWindow,U=e.setProxyWin,B=e.openFrame,J=e.openPrerenderFrame,Z=e.prerender,V=e.open,G=e.openPrerender,X=e.watchForUnload,K=function(n){for(var e={},r=0,t=Object.keys(C);r<t.length;r++){var o=t[r],i=s[o];i&&!1===i.sendToChild||i&&i.sameDomain&&!T(n,E(window))||(e[o]=C[o])}return e},Q=function(){return q?q():l.try(function(){var n=C.window;if(n){var e=_e(n);return W.register(function(){return n.close()}),e}return new ee({send:me})})},fn=function(n){return R?R(n):l.try(function(){return e=n,new l(function(n,r){var t=tn(e),o=gn(e);if(o)return n(o);if(hn())return r(new Error("Document is ready and element "+t+" does not exist"));var i=setInterval(function(){return(o=gn(e))?(clearInterval(i),n(o)):hn()?(clearInterval(i),r(new Error("Document is ready and element "+t+" does not exist"))):void 0},10)});var e}).then(function(n){return jn(n)&&(n=function(n){var e=function(n){var e=function(n){for(;n.parentNode;)n=n.parentNode;if(jn(n))return n}(n);if(e.host)return e.host}(n);if(!e)throw new Error("Element is not in shadow dom");if(jn(e))throw new Error("Host element is also in shadow dom");var r="shadow-slot-"+Y(),t=document.createElement("slot");t.setAttribute("name",r),n.appendChild(t);var o=document.createElement("div");return o.setAttribute("slot",r),e.appendChild(o),o}(n)),be(n)})},ln=function(n,e,r,t){var o=ye(n,r,K(r)),i=e===E()?{type:"uid",uid:t}:{type:"raw",value:o};if("uid"===i.type){var a=Ee(window);a.props=a.props||{},a.props[t]=o,W.register(function(){delete a.props[t]})}return i},wn=function(n){return U?U(n):l.try(function(){a=n})},pn=function(){return k?k():l.try(function(){if(D=!0,u)return u.get().then(Wn)})},vn=function(){return L?L():l.try(function(){if(D=!1,u)return u.get().then(On)})},yn=function(){return"function"==typeof y?y({props:C}):y},_n=function(){return"function"==typeof p?p({props:C}):p},En=function(){return g&&"string"==typeof g?g:N(yn())},zn=function(){return g&&sn(g)?g:En()},Rn=function(n,e){var r=e.windowName;return B?B(n,{windowName:r}):l.try(function(){if(n===We.IFRAME)return be(xn({attributes:t({name:r,title:w},_n().iframe)}))})},kn=function(n){return J?J(n):l.try(function(){if(n===We.IFRAME)return be(xn({attributes:t({name:"__zoid_prerender_frame__"+w+"_"+Y()+"__",title:"prerender__"+w},_n().iframe)}))})},An=function(n,e,r){return G?G(n,e,r):l.try(function(){if(n===We.IFRAME){if(!r)throw new Error("Expected proxy frame to be passed");return r.get().then(function(n){return W.register(function(){return Sn(n)}),bn(n).then(function(n){return x(n)}).then(function(n){return _e(n)})})}throw new Error("No render context available for "+n)})},In=function(){return l.try(function(){if(a)return l.all([S.trigger(Oe.FOCUS),a.focus()]).then(nn)})},Tn=function(n,e,r,t){if(e===E(window)){var o=Ee(window);return o.windows=o.windows||{},o.windows[r]=window,W.register(function(){delete o.windows[r]}),{type:"global",uid:r}}return t===We.POPUP?{type:"opener"}:{type:"parent",distance:A(window)}},Nn=function(n){return l.try(function(){c=n,_.resolve(),W.register(function(){return n.close.fireAndForget().catch(nn)})})},Fn=function(n){var e=n.width,r=n.height;return l.try(function(){S.trigger(Oe.RESIZE,{width:e,height:r})})},$n=function(n){return l.try(function(){return S.trigger(Oe.DESTROY)}).catch(nn).then(function(){return W.all()}).then(function(){_.asyncReject(n||new Error("Component destroyed"))})},Mn=function(){return $?$():l.try(function(){return S.trigger(Oe.CLOSE)}).then(function(){return $n(new Error("Window closed"))})},qn=function(n,e){var r=e.proxyWin,t=e.proxyFrame;return V?V(n,{proxyWin:r,proxyFrame:t,windowName:e.windowName}):l.try(function(){if(n===We.IFRAME){if(!t)throw new Error("Expected proxy frame to be passed");return t.get().then(function(n){return bn(n).then(function(e){var r,t,o,i=(r=n,t=en(t=Mn),Cn(r)?t():o=an(function(){Cn(r)&&(o.cancel(),t())},50),{cancel:function(){o&&o.cancel()}});return W.register(function(){return i.cancel()}),W.register(function(){return Sn(n)}),W.register(function(){return function(n){for(var e=0,r=Ln("requestPromises").get(n,[]);e<r.length;e++)r[e].reject(new Error("Window "+(z(n)?"closed":"cleaned up")+" before response")).catch(nn)}(e)}),e})})}throw new Error("No render context available for "+n)}).then(function(n){return r.setWindow(n,{send:me}),r})},Un=function(){return l.try(function(){var n=Pn(window,"unload",en(function(){$n(new Error("Window navigated away"))})),e=F(r,$n,3e3);if(W.register(e.cancel),W.register(n.cancel),X)return X()})},Bn=function(n){var e=!1;return n.isClosed().then(function(r){return r?(e=!0,Mn()):l.delay(200).then(function(){return n.isClosed()}).then(function(n){if(n)return e=!0,Mn()})}).then(function(){return e})},Jn=function(n){return j?j(n):l.try(function(){if(-1===P.indexOf(n))return P.push(n),_.asyncReject(n),S.trigger(Oe.ERROR,n)})};Nn.onError=Jn;var Hn=function(n,e){return n({container:e.container,context:e.context,uid:e.uid,doc:e.doc,frame:e.frame,prerenderFrame:e.prerenderFrame,focus:In,close:Mn,state:O,props:C,tag:h,dimensions:v,event:S})},Yn=function(n,e){var r=e.context,t=e.uid;return Z?Z(n,{context:r,uid:t}):l.try(function(){if(d){var e=n.getWindow();if(e&&b(e)&&function(n){try{if(!n.location.href)return!0;if("about:blank"===n.location.href)return!0}catch(e){}return!1}(e)){var o=(e=x(e)).document,i=Hn(d,{context:r,uid:t,doc:o});if(i){if(i.ownerDocument!==o)throw new Error("Expected prerender template to have been created with document from child window");!function(n,e){var r=e.tagName.toLowerCase();if("html"!==r)throw new Error("Expected element to be html, got "+r);for(var t=n.document.documentElement,o=0,i=un(t.children);o<i.length;o++)t.removeChild(i[o]);for(var a=0,u=un(e.children);a<u.length;a++)t.appendChild(u[a])}(e,i);var a=m.width,u=void 0!==a&&a,c=m.height,s=void 0!==c&&c,f=m.element,l=void 0===f?"body":f;(l=gn(l,o))&&(u||s)&&Dn(l,function(n){Fn({width:u?n.width:void 0,height:s?n.height:void 0})},{width:u,height:s,win:e})}}}})},Zn=function(n,e){var r=e.proxyFrame,t=e.proxyPrerenderFrame,o=e.context,i=e.uid;return M?M(n,{proxyFrame:r,proxyPrerenderFrame:t,context:o,uid:i}):l.hash({container:n.get(),frame:r?r.get():null,prerenderFrame:t?t.get():null}).then(function(n){var e=n.container,r=Hn(f,{context:o,uid:i,container:e,frame:n.frame,prerenderFrame:n.prerenderFrame,doc:document});if(r)return D||On(r),function(n,e){n.appendChild(e)}(e,r),W.register(function(){return Sn(r)}),u=be(r)})},Vn=function(){return{state:O,event:S,close:Mn,focus:In,resize:Fn,onError:Jn,updateProps:Xn,show:pn,hide:vn}},Gn=function(n,e){void 0===e&&(e=!1);var r=Vn();!function(n,e,r,t,o){void 0===o&&(o=!1),on(e,r=r||{});for(var i=o?[]:[].concat(Object.keys(n)),a=0,u=Object.keys(r);a<u.length;a++){var c=u[a];-1===i.indexOf(c)&&i.push(c)}for(var s=[],f=t.state,d=t.close,l=t.focus,h=t.event,w=t.onError,p=0;p<i.length;p++){var v=i[p],m=n[v],y=r[v];if(m){var g=m.alias;if(g&&(!cn(y)&&cn(r[g])&&(y=r[g]),s.push(g)),m.value&&(y=m.value({props:e,state:f,close:d,focus:l,event:h,onError:w})),!cn(y)&&m.default&&(y=m.default({props:e,state:f,close:d,focus:l,event:h,onError:w})),cn(y)&&("array"===m.type?!Array.isArray(y):typeof y!==m.type))throw new TypeError("Prop is not of type "+m.type+": "+v);e[v]=y}}for(var _=0;_<s.length;_++)delete e[s[_]];for(var E=0,b=Object.keys(e);E<b.length;E++){var x=b[E],P=n[x],W=e[x];P&&cn(W)&&P.decorate&&(e[x]=P.decorate({value:W,props:e,state:f,close:d,focus:l,event:h,onError:w}))}for(var O=0,S=Object.keys(n);O<S.length;O++){var C=S[O];if(!1!==n[C].required&&!cn(e[C]))throw new Error("Expected prop \""+C+"\" to be defined")}}(s,C,n,r,e)},Xn=function(n){return Gn(n,!0),_.then(function(){var n=a;if(c&&n)return c.updateProps(K(zn())).catch(function(e){return Bn(n).then(function(n){if(!n)throw e})})})};return{init:function(){S.on(Oe.RENDER,function(){return C.onRender()}),S.on(Oe.DISPLAY,function(){return C.onDisplay()}),S.on(Oe.RENDERED,function(){return C.onRendered()}),S.on(Oe.CLOSE,function(){return C.onClose()}),S.on(Oe.DESTROY,function(){return C.onDestroy()}),S.on(Oe.RESIZE,function(){return C.onResize()}),S.on(Oe.FOCUS,function(){return C.onFocus()}),S.on(Oe.PROPS,function(n){return C.onProps(n)}),S.on(Oe.ERROR,function(n){return C&&C.onError?C.onError(n):_.reject(n).then(function(){setTimeout(function(){throw n},1)})}),W.register(S.reset)},render:function(n,e,r){return l.try(function(){var t="zoid-"+h+"-"+Y(),o=zn(),i=En();!function(n,e,r){if(n!==window){if(!I(window,n))throw new Error("Can only renderTo an adjacent frame");var t=E();if(!T(e,t)&&!b(n))throw new Error("Can not render remotely to "+e.toString()+" - can only render to "+t);if(r&&"string"!=typeof r)throw new Error("Container passed to renderTo must be a string selector, got "+typeof r+" }")}}(n,o,e);var u=l.try(function(){if(n!==window)return function(n,e){for(var r={},t=0,o=Object.keys(C);t<o.length;t++){var i=o[t],a=s[i];a&&a.allowDelegate&&(r[i]=C[i])}var u=me(e,"zoid_delegate_"+w,{overrides:{props:r,event:S,close:Mn,onError:Jn}}).then(function(n){var r=n.data.parent;return W.register(function(){if(!z(e))return r.destroy()}),r.getDelegateOverrides()}).catch(function(n){throw new Error("Unable to delegate rendering. Possibly the component is not loaded in the target window.\n\n"+rn(n))});return R=function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return u.then(function(n){return n.getProxyContainer.apply(n,e)})},M=function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return u.then(function(n){return n.renderContainer.apply(n,e)})},k=function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return u.then(function(n){return n.show.apply(n,e)})},L=function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return u.then(function(n){return n.hide.apply(n,e)})},X=function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return u.then(function(n){return n.watchForUnload.apply(n,e)})},n===We.IFRAME&&(q=function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return u.then(function(n){return n.getProxyWindow.apply(n,e)})},B=function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return u.then(function(n){return n.openFrame.apply(n,e)})},J=function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return u.then(function(n){return n.openPrerenderFrame.apply(n,e)})},Z=function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return u.then(function(n){return n.prerender.apply(n,e)})},V=function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return u.then(function(n){return n.open.apply(n,e)})},G=function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return u.then(function(n){return n.openPrerender.apply(n,e)})}),u}(r,n)}),c=C.window,f=Un(),d=function(n,e){var r={},t=Object.keys(e);return l.all(t.map(function(t){var o=n[t];if(o)return l.resolve().then(function(){var n=e[t];if(n&&o.queryParam)return n}).then(function(n){if(null!=n)return l.all([Re(o,t,n),ke(o,0,n)]).then(function(n){var e,i=n[0],a=n[1];if("boolean"==typeof a)e=a.toString();else if("string"==typeof a)e=a.toString();else if("object"==typeof a&&null!==a){if(o.serialization===Pe.JSON)e=JSON.stringify(a);else if(o.serialization===Pe.BASE64)e=btoa(JSON.stringify(a));else if(o.serialization===Pe.DOTIFY||!o.serialization){e=function n(e,r,t){for(var o in void 0===r&&(r=""),void 0===t&&(t={}),r=r?r+".":r,e)e.hasOwnProperty(o)&&null!=e[o]&&"function"!=typeof e[o]&&(e[o]&&Array.isArray(e[o])&&e[o].length&&e[o].every(function(n){return"object"!=typeof n})?t[""+r+o+"[]"]=e[o].join(","):e[o]&&"object"==typeof e[o]?t=n(e[o],""+r+o,t):t[""+r+o]=e[o].toString());return t}(a,t);for(var u=0,c=Object.keys(e);u<c.length;u++){var s=c[u];r[s]=e[s]}return}}else"number"==typeof a&&(e=a.toString());r[i]=e})})})).then(function(){return r})}(s,C).then(function(n){return function(n,e){var r,t,o=e.query||{},i=e.hash||{},a=n.split("#");t=a[1];var u=(r=a[0]).split("?");r=u[0];var c=mn(u[1],o),s=mn(t,i);return c&&(r=r+"?"+c),s&&(r=r+"#"+s),r}(function(n){if(0!==N(n).indexOf("mock:"))return n;throw new Error("Mock urls not supported out of test mode")}(yn()),{query:n})}),p=S.trigger(Oe.RENDER),v=fn(e),m=Q(),y=m.then(function(e){return function(n){var e,r,t,o,i,a,u,c,s=(t=(r=void 0===(e={proxyWin:n.proxyWin,childDomain:n.childDomain,domain:n.domain,target:n.target,context:n.context,uid:n.uid})?{}:e).proxyWin,o=r.childDomain,i=r.domain,void 0===r.target&&window,{uid:u=r.uid,context:a=r.context,tag:h,version:"9_0_47",childDomain:o,parentDomain:E(window),parent:Tn(0,o,u,a),props:ln(t,o,i,u),exports:ye(t,i,(c=t,{init:Nn,close:Mn,checkClose:function(){return Bn(c)},resize:Fn,onError:Jn,show:pn,hide:vn}))});return"__zoid__"+w+"__"+H(JSON.stringify(s))+"__"}({proxyWin:e,childDomain:i,domain:o,target:n,context:r,uid:t})}),g=y.then(function(n){return Rn(r,{windowName:n})}),x=kn(r),P=l.hash({proxyContainer:v,proxyFrame:g,proxyPrerenderFrame:x}).then(function(n){return Zn(n.proxyContainer,{context:r,uid:t,proxyFrame:n.proxyFrame,proxyPrerenderFrame:n.proxyPrerenderFrame})}).then(function(n){return n}),O=l.hash({windowName:y,proxyFrame:g,proxyWin:m}).then(function(n){var e=n.proxyWin;return c?e:qn(r,{windowName:n.windowName,proxyWin:e,proxyFrame:n.proxyFrame})}),D=l.hash({proxyWin:O,proxyPrerenderFrame:x}).then(function(n){return An(r,n.proxyWin,n.proxyPrerenderFrame)}),j=O.then(function(n){return a=n,wn(n)}),A=l.hash({proxyPrerenderWin:D,state:j}).then(function(n){return Yn(n.proxyPrerenderWin,{context:r,uid:t})}),F=l.hash({proxyWin:O,windowName:y}).then(function(n){if(c)return n.proxyWin.setName(n.windowName)}),$=l.hash({proxyWin:O,builtUrl:d,windowName:F,prerender:A}).then(function(n){return n.proxyWin.setLocation(n.builtUrl)}),U=O.then(function(n){!function n(e){var r=!1;return W.register(function(){r=!0}),l.delay(2e3).then(function(){return e.isClosed()}).then(function(t){return t?Mn():r?void 0:n(e)})}(n)}),K=l.hash({container:P,prerender:A}).then(function(){return S.trigger(Oe.DISPLAY)}),nn=O.then(function(n){}),en=$.then(function(){return l.try(function(){var n=C.timeout;if(n)return _.timeout(n,new Error("Loading component timed out after "+n+" milliseconds"))})}),tn=_.then(function(){return S.trigger(Oe.RENDERED)});return l.hash({initPromise:_,buildUrlPromise:d,onRenderPromise:p,getProxyContainerPromise:v,openFramePromise:g,openPrerenderFramePromise:x,renderContainerPromise:P,openPromise:O,openPrerenderPromise:D,setStatePromise:j,prerenderPromise:A,loadUrlPromise:$,buildWindowNamePromise:y,setWindowNamePromise:F,watchForClosePromise:U,onDisplayPromise:K,openBridgePromise:nn,runTimeoutPromise:en,onRenderedPromise:tn,delegatePromise:u,watchForUnloadPromise:f})}).catch(function(n){return l.all([Jn(n),$n(n)]).then(function(){throw n},function(){throw n})}).then(nn)},destroy:$n,setProps:Gn,getHelpers:Vn,getDelegateOverrides:function(){return l.try(function(){return{getProxyContainer:fn,show:pn,hide:vn,renderContainer:Zn,getProxyWindow:Q,watchForUnload:Un,openFrame:Rn,openPrerenderFrame:kn,prerender:Yn,open:qn,openPrerender:An,setProxyWin:wn}})}}}function Ie(n){var e=n.uid,r=n.frame,t=n.prerenderFrame,o=n.doc,i=n.props,a=n.event,u=n.dimensions,c=u.width,s=u.height;if(r&&t){var f=o.createElement("div");f.setAttribute("id",e);var d=o.createElement("style");return i.cspNonce&&d.setAttribute("nonce",i.cspNonce),d.appendChild(o.createTextNode("\n            #"+e+" {\n                display: inline-block;\n                position: relative;\n                width: "+c+";\n                height: "+s+";\n            }\n\n            #"+e+" > iframe {\n                display: inline-block;\n                position: absolute;\n                width: 100%;\n                height: 100%;\n                top: 0;\n                left: 0;\n                transition: opacity .2s ease-in-out;\n            }\n\n            #"+e+" > iframe.zoid-invisible {\n                opacity: 0;\n            }\n\n            #"+e+" > iframe.zoid-visible {\n                opacity: 1;\n        }\n        ")),f.appendChild(r),f.appendChild(t),f.appendChild(d),t.classList.add("zoid-visible"),r.classList.add("zoid-invisible"),a.on(Oe.RENDERED,function(){t.classList.remove("zoid-visible"),t.classList.add("zoid-invisible"),r.classList.remove("zoid-invisible"),r.classList.add("zoid-visible"),setTimeout(function(){Sn(t)},1)}),a.on(Oe.RESIZE,function(n){var e=n.width,r=n.height;"number"==typeof e&&(f.style.width=Rn(e)),"number"==typeof r&&(f.style.height=Rn(r))}),f}}var Te=function(){return nn},Ne=function(n){return en(n.value)},Fe=dn();function Le(n){var e,r,o,i;kn().initialized||(kn().initialized=!0,r=(e={on:ve,send:me}).on,o=e.send,(i=kn()).receiveMessage=i.receiveMessage||function(n){return pe(n,{on:r,send:o})},function(n){var e=n.on,r=n.send;In().getOrSet("postMessageListener",function(){return Pn(window,"message",function(n){!function(n,e){var r=e.on,t=e.send,o=n.source||n.sourceElement,i=n.origin||n.originalEvent&&n.originalEvent.origin,a=n.data;if("null"===i&&(i="file://"),o){if(!i)throw new Error("Post message did not have origin domain");pe({source:o,origin:i,data:a},{on:r,send:t})}}(n,{on:e,send:r})})})}({on:ve,send:me}),function(n){var e=n.on,r=n.send;In("builtinListeners").getOrSet("helloListener",function(){var n=e("postrobot_hello",{domain:"*"},function(n){return Mn(n.source,{domain:n.origin}),{instanceID:$n()}}),t=R();return t&&qn(t,{send:r}).catch(nn),n})}({on:ve,send:me}));var a=function(n){var e=function(n){var e=n.tag,r=n.url,o=n.domain,i=n.bridgeUrl,a=n.props,u=void 0===a?{}:a,c=n.dimensions,s=void 0===c?{}:c,f=n.autoResize,d=void 0===f?{}:f,l=n.allowedParentDomains,h=void 0===l?"*":l,w=n.attributes,p=void 0===w?{}:w,v=n.defaultContext,m=void 0===v?We.IFRAME:v,y=n.containerTemplate,g=void 0===y?Ie:y,_=n.prerenderTemplate,E=void 0===_?null:_,x=n.validate,P=n.eligible,W=void 0===P?function(){return{eligible:!0}}:P,O=n.logger,S=void 0===O?{info:nn}:O,C=e.replace(/-/g,"_"),D=s.width,j=void 0===D?"300px":D,R=s.height,k=void 0===R?"150px":R;if(u=t({},{window:{type:"object",sendToChild:!1,required:!1,allowDelegate:!0,validate:function(n){var e=n.value;if(!L(e)&&!ee.isProxyWindow(e))throw new Error("Expected Window or ProxyWindow");if(L(e)){if(z(e))throw new Error("Window is closed");if(!b(e))throw new Error("Window is not same domain")}},decorate:function(n){return _e(n.value)}},timeout:{type:"number",required:!1,sendToChild:!1},close:{type:"function",required:!1,sendToChild:!1,childDecorate:function(n){return n.close}},focus:{type:"function",required:!1,sendToChild:!1,childDecorate:function(n){return n.focus}},resize:{type:"function",required:!1,sendToChild:!1,childDecorate:function(n){return n.resize}},cspNonce:{type:"string",required:!1},getParent:{type:"function",required:!1,sendToChild:!1,childDecorate:function(n){return n.getParent}},getParentDomain:{type:"function",required:!1,sendToChild:!1,childDecorate:function(n){return n.getParentDomain}},show:{type:"function",required:!1,sendToChild:!1,childDecorate:function(n){return n.show}},hide:{type:"function",required:!1,sendToChild:!1,childDecorate:function(n){return n.hide}},onDisplay:{type:"function",required:!1,sendToChild:!1,allowDelegate:!0,default:Te,decorate:Ne},onRendered:{type:"function",required:!1,sendToChild:!1,default:Te,decorate:Ne},onRender:{type:"function",required:!1,sendToChild:!1,default:Te,decorate:Ne},onClose:{type:"function",required:!1,sendToChild:!1,allowDelegate:!0,default:Te,decorate:Ne},onDestroy:{type:"function",required:!1,sendToChild:!1,allowDelegate:!0,default:Te,decorate:Ne},onResize:{type:"function",required:!1,sendToChild:!1,allowDelegate:!0,default:Te},onFocus:{type:"function",required:!1,sendToChild:!1,allowDelegate:!0,default:Te},onError:{type:"function",required:!1,sendToChild:!1,childDecorate:function(n){return n.onError}},onProps:{type:"function",required:!1,sendToChild:!1,default:Te,childDecorate:function(n){return n.onProps}}},u),!g)throw new Error("Container template required");return{name:C,tag:e,url:r,domain:o,bridgeUrl:i,propsDef:u,dimensions:{width:j,height:k},autoResize:d,allowedParentDomains:h,attributes:p,defaultContext:m,containerTemplate:g,prerenderTemplate:E,validate:x,logger:S,eligible:W}}(n),r=e.name,o=e.tag,i=e.defaultContext,a=e.eligible,u=Ee(),c=[],s=function(){var n=De();return Boolean(n&&n.tag===o&&n.childDomain===E())},f=X(function(){if(s()){if(window.xprops)throw delete u.components[o],new Error("Can not register "+r+" as child - child already registered");var n=function(n){var e,r=n.propsDef,t=n.autoResize,o=n.allowedParentDomains,i=[],a=De();if(!a)throw new Error("No child payload found");if("9_0_47"!==a.version)throw new Error("Parent window has zoid version "+a.version+", child window has version 9_0_47");var u=a.parentDomain,c=a.exports,s=a.context,f=a.props,d=function(n){var e,r,t=n.type;if("opener"===t)return ln("opener",y(window));if("parent"===t&&"number"==typeof n.distance)return ln("parent",(e=window,void 0===(r=n.distance)&&(r=1),function(n,e){void 0===e&&(e=1);for(var r=n,t=0;t<e;t++){if(!r)return;r=m(r)}return r}(e,A(e)-r)));if("global"===t&&n.uid&&"string"==typeof n.uid){var o=n.uid,i=R(window);if(!i)throw new Error("Can not find ancestor window");for(var a=0,u=C(i);a<u.length;a++){var c=u[a];if(b(c)){var s=Ee(c);if(s&&s.windows&&s.windows[o])return s.windows[o]}}}throw new Error("Unable to find "+t+" parent component window")}(a.parent),h=ge(d,u,c),w=h.show,p=h.hide,v=h.close,g=function(){return d},_=function(){return u},x=function(n){i.push(n)},P=function(n){return l.try(function(){if(h&&h.onError)return h.onError(n);throw n})},W=function(n){return h.resize.fireAndForget({width:n.width,height:n.height})},O=function(n,t,o){void 0===o&&(o=!1);var a=function(n,e,r,t,o,i){void 0===i&&(i=!1);for(var a={},u=0,c=Object.keys(r);u<c.length;u++){var s=c[u],f=e[s];if(!f||!f.sameDomain||t===E(window)&&b(n)){var d=Se(e,0,s,r[s],o);a[s]=d,f&&f.alias&&!a[f.alias]&&(a[f.alias]=d)}}if(!i)for(var l=0,h=Object.keys(e);l<h.length;l++){var w=h[l];r.hasOwnProperty(w)||(a[w]=Se(e,0,w,void 0,o))}return a}(d,r,n,t,{show:w,hide:p,close:v,focus:je,onError:P,resize:W,onProps:x,getParent:g,getParentDomain:_},o);e?on(e,a):e=a;for(var u=0;u<i.length;u++)(0,i[u])(e)},S=function(n){return l.try(function(){return O(n,u,!0)})};return{init:function(){return l.try(function(){return function(n,e){if(!T(n,e))throw new Error("Can not be rendered by domain: "+e)}(o,u),Bn(d),window.addEventListener("beforeunload",function(){h.checkClose.fireAndForget()}),window.addEventListener("unload",function(){h.checkClose.fireAndForget()}),F(d,function(){ze()}),h.init({updateProps:S,close:ze})}).then(function(){return pn().then(function(){if(document.body)return document.body;throw new Error("Document ready but document.body not present")}).then(function(){var n=function(){var n=t.width,e=t.height,r=t.element,o=void 0===r?"body":r;return{width:void 0!==n&&n,height:void 0!==e&&e,element:o=gn(o)}}(),e=n.width,r=n.height,o=n.element;o&&(e||r)&&s!==We.POPUP&&Dn(o,function(n){W({width:e?n.width:void 0,height:r?n.height:void 0})},{width:e,height:r})})}).catch(function(n){P(n)})},getProps:function(){return e||(O(function(n,e,r){var t,o=r.type,i=r.uid;if("raw"===o)t=r.value;else if("uid"===o){if(!b(n))throw new Error("Parent component window is on a different domain - expected "+E()+" - can not retrieve props");var a=Ee(n);t=ln("props",a&&a.props[i])}if(!t)throw new Error("Could not find props");return ge(n,e,t)}(d,u,f),u),e)}}}(e);return n.init(),n}});if(f(),ve("zoid_allow_delegate_"+r,function(){return!0}),ve("zoid_delegate_"+r,function(n){return{parent:Ae(e,n.data.overrides,n.source)}}),u.components=u.components||{},u.components[o])throw new Error("Can not register multiple components with the same tag: "+o);return u.components[o]=!0,{init:function n(o){var u,s=a({props:o=o||{}}),f=s.eligible,d=s.reason,h=o.onDestroy;o.onDestroy=function(){if(u&&f&&c.splice(c.indexOf(u),1),h)return h.apply(void 0,arguments)};var w=Ae(e);w.init(),f?w.setProps(o):o.onDestroy&&o.onDestroy(),Fe.register(function(){w.destroy(new Error("zoid destroyed all components"))});var p=function(n,e,t){return l.try(function(){if(!f)return w.destroy().then(function(){throw new Error(d||r+" component is not eligible")});if(!L(n))throw new Error("Must pass window to renderTo");return function(n,e){return l.try(function(){if(n.window)return _e(n.window).getType();if(e){if(e!==We.IFRAME&&e!==We.POPUP)throw new Error("Unrecognized context: "+e);return e}return i})}(o,t)}).then(function(r){return e=function(n,e){if(e){if("string"!=typeof e&&!yn(e))throw new TypeError("Expected string or element selector to be passed");return e}if(n===We.POPUP)return"body";throw new Error("Expected element to be passed to render iframe")}(r,e),w.render(n,e,r)}).catch(function(n){return w.destroy(n).then(function(){throw n})})};return u=t({},w.getHelpers(),{isEligible:function(){return f},clone:function(e){var r=(void 0===e?{}:e).decorate;return n((void 0===r?function(n){return n}:r)(o))},render:function(n,e){return p(window,n,e)},renderTo:function(n,e,r){return p(n,e,r)}}),f&&c.push(u),u},instances:c,driver:function(n,e){throw new Error("Driver support not enabled")},isChild:s,canRenderTo:function(n){return me(n,"zoid_allow_delegate_"+r).then(function(n){return n.data}).catch(function(){return!1})},registerChild:f}}(n),u=function(n){return a.init(n)};u.driver=function(n,e){return a.driver(n,e)},u.isChild=function(){return a.isChild()},u.canRenderTo=function(n){return a.canRenderTo(n)},u.instances=a.instances;var c=a.registerChild();return c&&(window.xprops=u.xprops=c.getProps()),u}function $e(){var n=Fe.all();return Fe=dn(),n}var Me=$e;function qe(){var n;$e(),delete window.__zoid_9_0_47__,function(){for(var n=In("responseListeners"),e=0,r=n.keys();e<r.length;e++){var t=r[e],o=n.get(t);o&&(o.cancelled=!0),n.del(t)}}(),(n=In().get("postMessageListener"))&&n.cancel(),delete window.__post_robot_10_0_37__}}])})}(ha=(Rb(),ja)).default=ha;var xa=new Map,Pa=0;function Sb(e,t){if("floating"===t){var i=function(t){t.target&&e({height:t.target.innerHeight,width:t.target.innerWidth})};xa.set(Pa,i),Pa+=1,window.addEventListener("resize",i)}return Pa}function Tb(e){var t=xa.get(e);t&&window.removeEventListener("resize",t),xa.delete(e)}var Ub="https://webchat.iris.ci/webchat";function Qa(e){function t(e){return function(e){if("number"==typeof e)return e;var t=e.match(/^([0-9]+)(px|%)$/);if(!t)throw new Error("Could not match css value from "+e);return parseInt(t[1],10)}(e)+"px"}return"number"==typeof e?t(e):/^[0-9]+%$/.test(e)?e:t(e)}var Vb=ha.create({autoResize:{element:"noElement",height:!0,width:!0},containerTemplate:function(e){var t=e.uid,i=e.frame,n=e.prerenderFrame,r=e.doc,o=e.event,d=e.dimensions,a=d.width,$=d.height,s=e.props;if(i&&n){var y=r.createElement("div");if(!y)throw new Error("Could not find element with given id to embed webchat into.");y.setAttribute("id",t);var u=r.createElement("style"),h=Sa(s.mode,s.zIndex);return u.appendChild(r.createTextNode("\n        #"+t+" {\n          right: 0;\n          bottom: 0;\n          "+(null!==h?"z-index: "+h+";":"")+"\n          position: "+("floating"===s.mode?"fixed":"relative")+";\n          height: "+("floating"===s.mode?$:"100%")+";\n          width: "+("floating"===s.mode?a:"100%")+";\n        }\n        #"+t+" > iframe {\n          overflow: hidden;\n          width: 100%;\n          height: 100%;\n          z-index: 9998;\n        }\n        #"+t+" > iframe.invisible {\n            opacity: 0;\n        }\n        #"+t+" > iframe.visible {\n            opacity: 1;\n        }\n      ")),y.appendChild(i),y.appendChild(n),y.appendChild(u),n.classList.add("visible"),i.classList.add("invisible"),o.on(ha.EVENT.RENDERED,function(){n.classList.remove("visible"),n.classList.add("invisible"),i.classList.remove("invisible"),i.classList.add("visible"),setTimeout(function(){n&&n.parentNode&&n.parentNode.removeChild(n)},1)}),o.on(ha.EVENT.RESIZE,function(e){var t=e.height,i=e.width;"floating"===s.mode&&i>0&&t>0&&(y.style.width=Qa(i),y.style.height=Qa(t))}),o.on(ha.EVENT.PROPS,function(e){console.log("UNICORN",e)}),y}},dimensions:{height:"66px",width:"66px"},prerenderTemplate:function(){},props:{entrypoint:{required:!1,type:"string"},getWindowSize:{required:!1,type:"function",default:function(e){var t=e.props;return function(){return Ta(t.mode)}}},mode:{queryParam:!0,required:!1,type:"string",default:function(){return"floating"}},onWindowResize:{required:!1,type:"function",default:function(e){var t=e.props;return function(e){return Sb(e,t.mode)}}},profileData:{required:!1,type:"object"},removeOnWindowResize:{required:!1,type:"function",default:function(){return Tb}},theme:{required:!1,type:"object"},token:{queryParam:!0,required:!0,type:"string"}},tag:"proxima-webchat-v1",url:Ub||"unset"});var Ra=ga&&ga.__assign||function(){return(Ra=Object.assign||function(t){for(var r,i=1,n=arguments.length;i<n;i++)for(var e in r=arguments[i])Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e]);return t}).apply(this,arguments)},Wb=function(t,r){var i=t;return{getProfileData:function(){return i.profileData},setProfileData:function(t){i=Ra(Ra({},i),{profileData:t}),r.updateProps(i)}}},ya=function(t,r){return new Promise(function(i,n){try{0;var e=Vb(t);e.render(r||("inline"===t.mode?"#embed-chat":"body")),i(Wb(t,e))}catch(o){0,n(o)}})};ga.init=ya;try{window.IrisWebChat&&window.IrisWebChat.__earlyInit&&window.IrisWebChat.__onLoad&&"function"==typeof window.IrisWebChat.__onLoad?window.IrisWebChat.__onLoad({init:ya}):window.IrisWebChat={init:ya}}catch(e){0}if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=ga}else if(typeof define==="function"&&define.amd){define(function(){return ga})}})();